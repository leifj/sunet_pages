<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="HSM Administration Guide|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Verifying an HA Group</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#administration/ha/setup/verify_group.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 data-mc-conditions="Default.ScreenOnly">Verifying an HA Group</h2>
        <p>After creating an HA group in LunaCM, you can see the group represented as a virtual slot alongside the physical slots:</p><pre>lunacm (64-bit) v7.3.0-74. Copyright (c) 2018 SafeNet. All rights reserved.</pre><pre>&#160;</pre><pre>&#160;</pre><pre xml:space="preserve">        Available HSMs:</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">        Slot Id -&gt;              0</pre><pre xml:space="preserve">        Label -&gt;                par0</pre><pre xml:space="preserve">        Serial Number -&gt;        154438865287</pre><pre xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre>&#160;</pre><pre xml:space="preserve">        Slot Id -&gt;              1</pre><pre xml:space="preserve">        Label -&gt;                par1</pre><pre xml:space="preserve">        Serial Number -&gt;        1238700701509</pre><pre xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre>&#160;</pre><pre xml:space="preserve">        Slot Id -&gt;              5</pre><pre xml:space="preserve">        HSM Label -&gt;            myHAgroup</pre><pre xml:space="preserve">        HSM Serial Number -&gt;    1154438865287</pre><pre xml:space="preserve">        HSM Model -&gt;            LunaVirtual</pre><pre xml:space="preserve">        HSM Firmware Version -&gt; 7.3.0</pre><pre xml:space="preserve">        HSM Configuration -&gt;    Luna Virtual HSM (PW) Key Export With Cloning Mode</pre><pre xml:space="preserve">        HSM Status -&gt;           N/A - HA Group</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Current Slot Id: 0</pre><pre xml:space="preserve">&#160;</pre>
        <p> The following procedure is one way to verify that your HA group is working as intended:</p>
        <h5>To verify an HA group</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Exit LunaCM and run <b>multitoken</b> against the HA group slot number (slot 5 in the example) to create some objects on the HA group partitions.</p>
        <p class="listLevel1" style="font-weight: normal;"><b>./multitoken -mode</b> &lt;keygen_mode&gt; <b>-key</b> &lt;key_size&gt; <b>-nodestroy</b> <b>-slots</b> &lt;HA_virtual_slot&gt;</p><pre class="listLevel1" xml:space="preserve">c:\Program Files\SafeNet\LunaClient&gt;multitoken -mode rsakeygen -key 4096 -nodestroy -slots 5</pre><pre class="listLevel1" xml:space="preserve">multitoken (64-bit) v7.3.0-74. Copyright (c) 2018 SafeNet. All rights reserved.</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">Initializing library...Finished Initializing</pre><pre class="listLevel1">...done.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Do you wish to continue?</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Enter 'y' or 'n': y</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Constructing thread objects.</pre><pre class="listLevel1">Logging in to tokens...</pre><pre class="listLevel1" xml:space="preserve">  slot 0...  Enter password: userpin</pre><pre class="listLevel1" xml:space="preserve">    Serial Number 154438865287</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Please wait, creating test threads.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Test threads created successfully. Press ENTER to terminate testing.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">     RSA key generation  4096-bit:</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">     Using token objects.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        +       keys/second | elapsed</pre><pre class="listLevel1" xml:space="preserve"> 0,  0 |   total   average  | time (secs)</pre><pre class="listLevel1">------ | ------- ---------- | ------------</pre><pre class="listLevel1" xml:space="preserve">   0.6 |     0.6     0.599* |            5</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Waiting for threads to terminate.</pre>
        <p class="listLevel1" style="font-weight: normal;">You can hit <b>Enter</b> at any time to stop the process before the partitions fill up completely. Any number of created objects will be sufficient to show that the HA group is functioning.</p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Run LunaCM and check the partition information on the two physical slots. Check the object count under "Partition Storage":</p>
        <p class="listLevel1">lunacm:&gt;<b>partition showinfo</b></p><pre class="listLevel1" xml:space="preserve">        Current Slot Id: 0</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">lunacm:&gt; partition showinfo</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">...(clip)...</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Partition Storage:</pre><pre class="listLevel1" xml:space="preserve">                Total Storage Space:  325896</pre><pre class="listLevel1" xml:space="preserve">                Used Storage Space:   22120</pre><pre class="listLevel1" xml:space="preserve">                Free Storage Space:   303776</pre><pre class="listLevel1" xml:space="preserve">                <span style="background-color: #ffff00;">Object Count:         14</span></pre><pre class="listLevel1" xml:space="preserve">                Overhead:             9648</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">Command Result : No Error</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">lunacm:&gt; slot set slot 1</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Current Slot Id:    1     (Luna User Slot 7.0.1 (PW) Signing With Cloning Mode)</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Command Result : No Error</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">lunacm:&gt; partition showinfo</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">...(clip)...</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Partition Storage:</pre><pre class="listLevel1" xml:space="preserve">                Total Storage Space:  325896</pre><pre class="listLevel1" xml:space="preserve">                Used Storage Space:   22120</pre><pre class="listLevel1" xml:space="preserve">                Free Storage Space:   303776</pre><pre class="listLevel1" xml:space="preserve">                <span style="background-color: #ffff00;">Object Count:         14</span></pre><pre class="listLevel1" xml:space="preserve">                Overhead:             9648</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">Command Result : No Error</pre>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>To remove the test objects, login to the HA virtual slot and clear the virtual partition (<a href="../../../lunacm/commands/slot/slot_set.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">slot set</a>, <a href="../../../lunacm/commands/partition/partition_login.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">partition login</a>, <a href="../../../lunacm/commands/partition/partition_clear.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">partition clear</a>).</p>
        <p class="listLevel1" style="font-weight: normal;">lunacm:&gt;<b>slot set slot</b> &lt;HA_virtual_slot&gt;</p>
        <p class="listLevel1" style="font-weight: normal;">lunacm:&gt;<b>partition login</b></p>
        <p class="listLevel1" style="font-weight: normal;">lunacm:&gt;<b>partition clear</b></p><pre class="listLevel1" xml:space="preserve">lunacm:&gt; slot set slot 5</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Current Slot Id:    5     (Virtual HSM 7.3.0 (PW) Key Export With Cloning Mode)</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Command Result : No Error</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">lunacm:&gt; partition login</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Option -password was not supplied.  It is required.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Enter the password: ********</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Command Result : No Error</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">lunacm:&gt; partition clear</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        You are about to delete all the user objects.</pre><pre class="listLevel1" xml:space="preserve">        Are you sure you wish to continue?</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Type 'proceed' to continue, or 'quit' to quit now -&gt; proceed</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        14 objects were deleted.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">Command Result : No Error</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre>
        <p>If you are satisfied that your HA group is working, you can begin 
using your application against the HA virtual slot. The virtual slot assignment will change depending on how many more application partitions are added to your client configuration. If your application invokes the HA group label, this will not matter. If you have applications that invoke the slot number, see <a href="haonly.htm" class="MCXref xref">Enabling/Disabling HA Only Mode</a>. </p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>