<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>token backup</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/token/token_backup.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">token backup</h2>
        <p>Access the token backup commands. </p>
        <h4>When to use LunaSH "token backup" commands, or use "vtl backup" commands:</h4>
        <p>LunaSH <b>token backup</b> commands operate a SafeNet Luna Backup HSM  attached directly to SafeNet Luna Network HSM via USB, and are not intended for use with remotely connected backup devices.</p>
        <p>  You might have a locally-connected backup HSM (connects directly to a SafeNet Luna Network HSM via USB cable) and a locally connected serial terminal and be walking them from SafeNet Luna Network HSM to SafeNet Luna Network HSM in your server room to perform backups. Or you might be administering remotely via SSH and lunash:&gt; commands, while a technician in your server center carries the backup HSM from one SafeNet Luna Network HSM to the next. In either case, these <b>token backup</b> commands are the method to use. The important distinction is where the backup HSM is physically connected -  from the SafeNet Luna Network HSM perspective, those are both local backup operations to a backup HSM that is locally connected to the appliance.</p>
        <p><b>VTL backup</b> commands operate a SafeNet Luna Backup HSM connected to a computer, and located distantly from your primary SafeNet Luna Network HSM appliance. The <b>VTL backup</b> commands are not for use with a SafeNet Luna Backup HSM that is connected directly to your SafeNet Luna Network HSM appliance.</p>
        <p>For true, hands-off, lights-out operation of your SafeNet appliances, use a SafeNet Luna Backup HSM located in your administrator's office (or other convenient location), connected to a computer acting as a Remote Backup server (this could be your administrative workstation, or it could be a completely separate computer). This means the computer and Backup HSM are located near you and remote/distant from your SafeNet Luna Network HSM appliance(s). For that application, use the <b>backup</b> commands in the VTL utility supplied with the SafeNet Luna Network HSM Client software (which must be installed on the computer that is acting as Remote Backup server)&#160;- the appliance <b>token backup</b> commands  are not designed to work for Remote Backup.</p>
        <h3 class="ntoc">Syntax</h3>
        <p style="font-weight: bold;">token backup</p>
        <p class="listLevel1" style="font-weight: bold;">factoryreset<br />init<br />list<br />login<br />logout<br />partition<br />show<br />update</p>
        <table style="mc-table-style: url('../../../Resources/TableStyles/Page.css');width: 100%;" class="TableStyle-Page" cellspacing="0">
            <col style="width: 200px;" class="TableStyle-Page-Column-Column1" />
            <col class="TableStyle-Page-Column-Column1" />
            <col class="TableStyle-Page-Column-Column1" />
            <thead>
                <tr class="TableStyle-Page-Head-Header1">
                    <th class="TableStyle-Page-HeadE-Column1-Header1">Argument(s)</th>
                    <th class="TableStyle-Page-HeadE-Column1-Header1">Shortcut</th>
                    <th class="TableStyle-Page-HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">factoryreset</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">f</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Reset a backup token to factory default settings. See <a href="token_backup_factoryreset.htm" class="MCXref xref">token backup factoryreset</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">init</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">i</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Initializes the token with the specified serial number and prepares it to receive backup 
 data. See <a href="token_backup_init.htm" class="MCXref xref">token backup init</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">list</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">li</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">List all backup tokens. See <a href="token_backup_list.htm" class="MCXref xref">token backup list</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">login</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">logi</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Login backup token admin. See <a href="token_backup_login.htm" class="MCXref xref">token backup login</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">logout</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">logo</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Logout backup token admin. See <a href="token_backup_logout.htm" class="MCXref xref">token backup logout</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">partition</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">p</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Access the token backup partition commands to manage your backup partitions. See <a href="token_backup_partition.htm" class="MCXref xref">token backup partition</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">show</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">s</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Get backup token information. See <a href="token_backup_show.htm" class="MCXref xref">token backup show</a>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">update</td>
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">u</td>
                    <td class="TableStyle-Page-BodyA-Column1-Body1">Update commands. See <a href="token_backup_update.htm" class="MCXref xref">token backup update</a>.</td>
                </tr>
            </tbody>
        </table>
        <p>An external SafeNet Luna Backup HSM can be USB-connected to a SafeNet Luna Network HSM appliance for local backup/restore operations.</p>
        <p>SafeNet Luna Network HSM does not pass PED operations and data through to an externally connected SafeNet Luna backup HSM from a Luna PED that is connected locally to the SafeNet Luna Network HSM.</p>
        <p>If the external HSM is PED-authenticated, then the options for Luna PED connection are:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>local PED connection, directly to the affected HSM, when needed, or</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Remote PED connection, passed through the SafeNet Luna Network HSM&#160;</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>Support for  locally connected Backup HSM with Remote PED, begins at firmware version 6.10.1 in the external HSM.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>Use of Remote PED with an external device is made possible when you set up with the commands <br /><b>hsm ped vector init -serial</b> &lt;serial#_of_external_HSM&gt; and <br /><b>hsm ped connect -serial</b> &lt;serial#_of_external_HSM&gt; <br />before using <b>token backup</b> commands. </p>
        <div class="caution">
            <p data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>When labeling HSMs or partitions, <i>never</i> use a numeral as the first, or only, character in the name/label. Token backup commands allow a slot-number OR a label as identifier, which can lead to confusion if the label is a string version of a slot number. </p>
            <p>For example, if the token is initialized with the label "<code>1</code>", the user cannot use the label to identify the target for backup purposes, because VTL parses "<code>1</code>" as the numeric ID of the first slot rather than as a text label for the target in the actual occupied slot.</p>
        </div>
        <p class="notepad_note">LunaSH token backup commands on SafeNet Luna Network HSM would be unable to see SafeNet Luna Backup HSM slots maintained by Remote Backup server. Either connect the Backup HSM locally to the SafeNet Luna Network HSM USB port to use token backup commands, or use VTL commands directed to a SafeNet Luna Backup HSM connected to a computer configured as a backup server.</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>