<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="HSM Administration Guide|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Adding/Removing an HA Group Member</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#administration/ha/manage/add_remove.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 data-mc-conditions="Default.ScreenOnly">Adding/Removing an HA Group Member</h2>
        <p>You can add a new member to an HA group at any time using LunaCM, even if your application is running. Cryptographic objects will be replicated on the new partition and operations will be scheduled according to the load-balancing algorithm (see <a href="../functionality.htm#LoadBalancing" class="MCXref xref">Load Balancing</a>). </p>
        <p>Likewise, you can remove a member at any time, and currently-scheduled operations will fail over to the rest of the group members (see <a href="../functionality.htm#Failover" class="MCXref xref">Failover</a>). </p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>If you remove the partition that was used to create the group, the HA group serial number changes to reflect this. This is to prevent another HA group from being assigned the same serial number as the original. If your application queries the HA group serial number, it must redirect operations to the new serial. </p>
        <h4>Prerequisites</h4>
        <p>The new member partition must:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>be assigned to the client and visible in LunaCM</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>be initialized with the same domain string/red domain PED key as the other partitions in the group</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>have the Crypto Officer role initialized with the same credentials as the other partitions in the group</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;" data-mc-conditions="Default.PED"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>be activated and have auto-activation enabled (PED-authenticated)</p>
        <h5>To add an HA group member</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Open LunaCM on the client workstation and ensure that the new partition is visible. </p><pre class="listLevel1">lunacm (64-bit) v7.3.0-74. Copyright (c) 2018 SafeNet. All rights reserved.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Available HSMs:</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              0</pre><pre class="listLevel1" xml:space="preserve">        Label -&gt;                par0</pre><pre class="listLevel1" xml:space="preserve">        Serial Number -&gt;        154438865287</pre><pre class="listLevel1" xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              1</pre><pre class="listLevel1" xml:space="preserve">        Label -&gt;                par1</pre><pre class="listLevel1" xml:space="preserve">        Serial Number -&gt;        1238700701509</pre><pre class="listLevel1" xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              2</pre><pre class="listLevel1" xml:space="preserve">        Label -&gt;                par2</pre><pre class="listLevel1" xml:space="preserve">        Serial Number -&gt;        <span style="background-color: #ffff00;">2855496365544</span></pre><pre class="listLevel1" xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              5</pre><pre class="listLevel1" xml:space="preserve">        HSM Label -&gt;            myHAgroup</pre><pre class="listLevel1" xml:space="preserve">        HSM Serial Number -&gt;    1154438865287</pre><pre class="listLevel1" xml:space="preserve">        HSM Model -&gt;            LunaVirtual</pre><pre class="listLevel1" xml:space="preserve">        HSM Firmware Version -&gt; 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        HSM Configuration -&gt;    Luna Virtual HSM (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        HSM Status -&gt;           N/A - HA Group</pre><pre class="listLevel1" xml:space="preserve">        HSM Certificates -&gt;     *** Test Certs ***</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">Current Slot Id: 0</pre>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Add the new partition to the HA group by specifying either the slot or the serial number (<a href="../../../lunacm/commands/hagroup/hagroup_addmember.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">hagroup addmember</a>). You are prompted for the Crypto Officer password/challenge secret. </p>
        <p class="listLevel1">lunacm:&gt; <b>hagroup addmember -group</b> &lt;label&gt; {<b>-slot</b> &lt;slotnum&gt; | <b>-serial</b> &lt;serialnum&gt;}</p><pre class="listLevel1" xml:space="preserve">lunacm:&gt; hagroup addmember -group myHAgroup -slot 2</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Enter the password: ********</pre><pre class="listLevel1" xml:space="preserve">        Member 2855496365544 successfully added to group myHAgroup. New group</pre><pre class="listLevel1" xml:space="preserve">        configuration is:</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">         HA Group Label:  myHAgroup</pre><pre class="listLevel1" xml:space="preserve">        HA Group Number:  1154438865287</pre><pre class="listLevel1" xml:space="preserve">       HA Group Slot ID:  5</pre><pre class="listLevel1" xml:space="preserve">       Synchronization: enabled</pre><pre class="listLevel1" xml:space="preserve">          Group Members:  154438865287, 1238700701509, 2855496365544</pre><pre class="listLevel1" xml:space="preserve">             Needs sync:  no</pre><pre class="listLevel1" xml:space="preserve">        Standby Members:  &lt;none&gt;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Slot #    Member S/N                      Member Label    Status</pre><pre class="listLevel1">======    ==========                      ============    ======</pre><pre class="listLevel1" xml:space="preserve">     0  154438865287                              par0     alive</pre><pre class="listLevel1" xml:space="preserve">     1  1238700701509                              par1     alive</pre><pre class="listLevel1" xml:space="preserve">     <span style="background-color: #ffff00;">2  2855496365544                              par2     alive</span></pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Please use the command "ha synchronize" when you are ready</pre><pre class="listLevel1" xml:space="preserve">        to replicate data between all members of the HA group.</pre><pre class="listLevel1" xml:space="preserve">        (If you have additional members to add, you may wish to wait</pre><pre class="listLevel1" xml:space="preserve">        until you have added them before synchronizing to save time by</pre><pre class="listLevel1" xml:space="preserve">        avoiding multiple synchronizations.)</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">Command Result : No Error</pre>
        <h5>To remove an HA group member</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Remove the partition from the group by specifying either the slot or the serial number (<a href="../../../lunacm/commands/hagroup/hagroup_removemember.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">hagroup removemember</a>). </p>
        <p class="listLevel1">lunacm:&gt; <b>hagroup removemember -group</b> &lt;label&gt; {<b>-slot</b> &lt;slotnum&gt; | <b>-serial</b> &lt;serialnum&gt;}</p><pre class="listLevel1" xml:space="preserve">lunacm:&gt; hagroup removemember -group myHAgroup -slot 0</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Member 154438865287 successfully removed from group myHAgroup.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Note: Serial number for the group changed to 11238700701509.</pre><pre class="listLevel1" xml:space="preserve">Command Result : No Error</pre>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>If you remove the partition that was used to create the group, the HA group serial number changes to reflect this. This is to prevent another HA group from being assigned the same serial number as the original. If your application queries the HA group serial number, it must redirect operations to the new serial. </p>
        <p class="listLevel1">LunaCM restarts. </p><pre class="listLevel1" xml:space="preserve">lunacm (64-bit) v7.3.0-74. Copyright (c) 2018 SafeNet. All rights reserved.</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Available HSMs:</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              0</pre><pre class="listLevel1" xml:space="preserve">        Label -&gt;                par0</pre><pre class="listLevel1" xml:space="preserve">        Serial Number -&gt;        154438865287</pre><pre class="listLevel1" xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              1</pre><pre class="listLevel1" xml:space="preserve">        Label -&gt;                par1</pre><pre class="listLevel1" xml:space="preserve">        Serial Number -&gt;        1238700701509</pre><pre class="listLevel1" xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              2</pre><pre class="listLevel1" xml:space="preserve">        Label -&gt;                par2</pre><pre class="listLevel1" xml:space="preserve">        Serial Number -&gt;        2855496365544</pre><pre class="listLevel1" xml:space="preserve">        Model -&gt;                LunaSA 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Firmware Version -&gt;     7.3.0</pre><pre class="listLevel1" xml:space="preserve">        Configuration -&gt;        Luna User Partition With SO (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        Slot Description -&gt;     Net Token Slot</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Slot Id -&gt;              5</pre><pre class="listLevel1" xml:space="preserve">        HSM Label -&gt;            myHAgroup</pre><pre class="listLevel1" xml:space="preserve">        HSM Serial Number -&gt;    <span style="background-color: #ffff00;">11238700701509</span></pre><pre class="listLevel1" xml:space="preserve">        HSM Model -&gt;            LunaVirtual</pre><pre class="listLevel1" xml:space="preserve">        HSM Firmware Version -&gt; 7.3.0</pre><pre class="listLevel1" xml:space="preserve">        HSM Configuration -&gt;    Luna Virtual HSM (PW) Key Export With Cloning Mode</pre><pre class="listLevel1" xml:space="preserve">        HSM Status -&gt;           N/A - HA Group</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">Current Slot Id: 0</pre>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>[Optional] Check that the partition was removed from the group (<a href="../../../lunacm/commands/hagroup/hagroup_listgroups.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">hagroup listgroups</a>).</p>
        <p class="listLevel1">lunacm:&gt; <b>hagroup listgroups</b></p><pre class="listLevel1" xml:space="preserve">lunacm:&gt; hagroup listgroups</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        If you would like to see synchronization data for group myHAgroup,</pre><pre class="listLevel1" xml:space="preserve">        please enter the password for the group members. Sync info</pre><pre class="listLevel1" xml:space="preserve">        not available in HA Only mode.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        Enter the password: ********</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">              HA auto recovery:  disabled</pre><pre class="listLevel1" xml:space="preserve">              HA recovery mode:  activeBasic</pre><pre class="listLevel1" xml:space="preserve">   Maximum auto recovery retry:  0</pre><pre class="listLevel1" xml:space="preserve">   Auto recovery poll interval:  60 seconds</pre><pre class="listLevel1" xml:space="preserve">                    HA logging:  disabled</pre><pre class="listLevel1" xml:space="preserve">            Only Show HA Slots:  no</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">                HA Group Label:  myHAgroup</pre><pre class="listLevel1" xml:space="preserve">               HA Group Number:  11238700701509</pre><pre class="listLevel1" xml:space="preserve">              HA Group Slot ID:  5</pre><pre class="listLevel1" xml:space="preserve">              Synchronization: enabled</pre><pre class="listLevel1" xml:space="preserve">                Group Members:  1238700701509, 2855496365544</pre><pre class="listLevel1" xml:space="preserve">                   Needs sync:  no</pre><pre class="listLevel1" xml:space="preserve">              Standby Members:  &lt;none&gt;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Slot #    Member S/N                      Member Label    Status</pre><pre class="listLevel1">======    ==========                      ============    ======</pre><pre class="listLevel1" xml:space="preserve">     1  1238700701509                              par1     alive</pre><pre class="listLevel1" xml:space="preserve">     2  2855496365544                              par2     alive</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Command Result : No Error</pre>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>