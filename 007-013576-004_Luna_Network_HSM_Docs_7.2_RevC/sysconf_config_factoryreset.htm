<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|sysconf|sysconf config">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>sysconf config factoryreset</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/sysconf/sysconf_config_factoryreset.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak"><a name="kanchor163"></a>sysconf config factoryreset</h2>
        <p>Reset the appliance to the settings created at the factory.  You can specify any individual service's configuration, or just reset all of them to the initial factory settings with the '-all' option. This reset is for the configurations of the indicated services and does not affect the HSM.</p>
        <p>This command affects appliance settings external to the HSM. To reset the HSM, use <b>hsm factoryreset</b> (which can be run from a local serial console only).</p>
        <p>We recommend disconnecting all NTLS connections before performing factory reset.</p>
        <h4>Files are not affected</h4>
        <p>The log files, and the content of users' home directories are not affected by this command.</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>To clear log files you can use the <b>syslog cleanup</b> command.  If you need to keep the logs, you should use the <b>syslog tarlogs</b> command, then scp the logs file to another computer before clearing the log files. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>To clear the content of the userâ€™s home directory, use the <b>my file clear</b> command. &#160;</p>
        <h4>SO login required if "Force SO login" policy is set</h4>
        <p>If the Force SO login policy is set for the HSM (see command <a href="sysconf_forcesologin_show.htm" class="MCXref xref">sysconf forcesologin show</a>), then you must log in as SO before resetting the 'ntls' service or 'all' services. </p>
        <p>If the HSM is zeroized, then <b>hsm login</b> is not needed, even if ForceSOlogin is enabled.</p>
        <p>ForceSOlogin is disabled following a successful <b>hsm login</b> if 'ntls' or 'all' services are reset. </p>
        <h4>What to do</h4>
        <p>To preserve desired settings and capabilities, we recommend that you perform <b>sysconf config backup</b> on your system whenever you upgrade or update or reconfigure, so as to have a backup with all desired configurations in place, and then use <b>sysconf config restore</b> if needed, reserving <b>sysconf config factoryreset</b> for only those occasions when you want the appliance set all the way back to original factory specification. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Use this command along with the <b>hsm factoryreset</b> command, if you want internal HSM settings returned to factory default values. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Use this command from a locally-connected serial terminal (or console server. This command resets network settings to use DHCP; as a result the network interfaces might be assigned new IP addresses. You can get the new IP addresses on the LCD or from a serial port connection. &#160;</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Disconnect all NTLS connections before factory reset.</p>
        <h3 class="ntoc">User Privileges</h3>
        <p>Users with the following privileges can perform this command:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Admin</p>
        <h3 class="ntoc">Syntax</h3>
        <p><b>sysconf config factoryreset -service</b> &lt;service&gt; [<b>-force</b>]</p>
        <table class="TableStyle-Page" style="caption-side: top;width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" cellspacing="0">
            <col class="TableStyle-Page-Column-Column1" style="width: 200px;" />
            <col class="TableStyle-Page-Column-Column1" style="width: 90px;" />
            <col class="TableStyle-Page-Column-Column1" />
            <thead>
                <tr class="TableStyle-Page-Head-Header1">
                    <th class="TableStyle-Page-HeadE-Column1-Header1" style="text-align: left;">Argument(s)</th>
                    <th class="TableStyle-Page-HeadE-Column1-Header1" style="text-align: left;">Shortcut</th>
                    <th class="TableStyle-Page-HeadD-Column1-Header1" style="text-align: left;">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1"><b>-f</b>
                    </td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Force the action without prompting.  </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-service&#160;<span style="font-weight: normal;">&lt;service&gt;</span></td>
                    <td class="TableStyle-Page-BodyB-Column1-Body1"><b>-s</b>
                    </td>
                    <td class="TableStyle-Page-BodyA-Column1-Body1">
                        <p>Specifies the service name.</p>
                        <p><b>Valid values:</b> network,ssh,ntls,syslog,ntp,snmp,users,system,webserver,all</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="notepad_note">
            <br />
        </p>
        <h3 class="ntoc">Example with no active client connections</h3><pre xml:space="preserve">lunash:&gt;sysconf config factoryReset -service all</pre><pre xml:space="preserve"> 
 Checking for connected clients 


 There are no active clients at this time.


 This command resets the configuration of the selected service(s) to factory defaults.
 Resetting services to factory defaults can affect connectivity and the operation of the HSM.
 If you are sure that you wish to proceed, then type 'proceed', otherwise type 'quit'.
</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&gt; proceed</pre><pre xml:space="preserve">Proceeding...</pre><pre xml:space="preserve">
 Resetting service(s) to factory defaults: 
 -----------------------------------------
 webserver :          succeeded
 users     :          succeeded
 snmp      :          succeeded
 ntp       :          succeeded
 ntls      :          succeeded
 system    :          succeeded
 ssh       :          succeeded
 syslog    :          succeeded
 network   :          succeeded

Command Result : 0 (Success)</pre>
        <p>&#160;</p>
        <h3 class="ntoc">Example with no active client connections and force option used</h3><pre xml:space="preserve">lunash:&gt;sysconf config factoryReset -service all -force
 
 Checking for connected clients
 There are no active clients at this time.

 Force option used. Proceed prompt bypassed.


 Resetting service(s) to factory defaults: 
 -----------------------------------------
 webserver :          succeeded 
 users     :          succeeded 
 snmp      :          succeeded 
 ntp       :          succeeded 
 ntls      :          succeeded 
 system    :          succeeded 
 ssh       :          succeeded 
 syslog    :          succeeded 
 network   :          succeeded 

Command Result : 0 (Success)&#160;
</pre>
        <p>&#160;</p>
        <h3 class="ntoc">Example with active client connections</h3><pre xml:space="preserve">lunash:&gt;sysconf config factoryReset -service all

 Checking for connected clients


 WARNING !! There are 1 client(s) connected to this Luna SA
 appliance. It is recommended that you disconnect all clients 
 before using this command.
 This command resets the configuration of the selected service(s) to factory defaults.
 Resetting services to factory defaults can affect connectivity and the operation of the HSM.
 If you are sure that you wish to proceed, then type 'proceed', otherwise type 'quit'. 

&gt; proceed</pre><pre xml:space="preserve">Proceeding...</pre><pre xml:space="preserve">
 Resetting service(s) to factory defaults: 
 -----------------------------------------
 webserver :          succeeded 
 users     :          succeeded 
 snmp      :          succeeded 
 ntp       :          succeeded 
 ntls      :          succeeded 
 system    :          succeeded 
 ssh       :          succeeded 
 syslog    :          succeeded 
 network   :          succeeded 

Command Result : 0 (Success)</pre>
        <p> <![CDATA[ ]]></p>
        <h3 class="ntoc">Example with active client connections and force option used</h3><pre xml:space="preserve">lunash:&gt;sysconf config factoryReset -service all -force 


 Checking for connected clients 


 WARNING !! There are 1 client(s) connected to this Luna SA
 appliance. It is recommended that you disconnect all clients 
 before using this command.
 Force option used. Proceed prompt bypassed.


 Resetting service(s) to factory defaults: 
 -----------------------------------------
 webserver :          succeeded 
 users     :          succeeded 
 snmp      :          succeeded 
 ntp       :          succeeded 
 ntls      :          succeeded 
 system    :          succeeded 
 ssh       :          succeeded 
 syslog    :          succeeded 
 network   :          succeeded 

Command Result : 0 (Success)</pre>
        <p>&#160;</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>