<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="HSM Administration Guide|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Policy Templates</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#administration/capabilities_and_policies/policy_templates.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2>Policy Templates</h2>
        <p>A policy template is a file containing a set of preferred HSM or partition policy settings, used to initialize HSMs/partitions with those settings. You can use the same file to initialize multiple HSMs or partitions, rather than changing policies manually after initialization. This can save time and effort when initializing HSMs or partitions that are to function as an HA group, or must comply with your company's overall security strategy. Templates enable scalable policy management and simplify future audit and compliance requirements. </p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>This feature has software and/or firmware dependencies. See <a href="../upgrade/version_dependencies.htm" class="MCXref xref">Version Dependencies by Feature</a> for more information.</p>
        <p>You can create a policy template file from an initialized or uninitialized HSM/partition, and edit it using a standard text editor. Partition policy templates have further customization options. </p>
        <p>Policy templates cannot be used to alter settings for an initialized HSM or partition. Once an HSM or partition has been initialized, the SO must use <b style="font-weight: normal;" data-mc-conditions="Default.SA"><b>hsm changepolicy</b> in LunaSH</b> or <b>partition changepolicy</b> in LunaCM to change individual policy values. To zeroize the HSM&#160;and reset the policies to their default values, use <b>hsm factoryreset</b> in <MadCap:conditionalText data-mc-conditions="Default.SA">LunaSH</MadCap:conditionalText>. </p>
        <p>To zeroize the HSM and keep the current policy settings, use <b>hsm zeroize</b> in <MadCap:conditionalText data-mc-conditions="Default.SA">LunaSH</MadCap:conditionalText>.</p>
        <p>This section provides instructions for the following procedures, and some general guidelines and restrictions:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#CreatePT" class="MCXref xref">Creating a Policy Template</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#EditPT" class="MCXref xref">Editing a Policy Template</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Guide" class="MCXref xref">Guidelines and Restrictions</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#ApplyPT" class="MCXref xref">Applying a Policy Template</a>
        </p>
        <h3><a name="CreatePT"></a>Creating a Policy Template</h3>
        <p>The following procedures describe how to create a policy template for an HSM or partition. </p>
        <h5>To create an HSM policy template:</h5>
        <p class="ol1Start" data-mc-autonum="1." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">1.</span></span>Login to LunaSH as <b>admin</b>. If you are creating a template from an initialized HSM, you must log in as HSM SO. </p>
        <p class="listLevel1" style="font-weight: normal;" data-mc-conditions="Default.SA">lunash:&gt;<b>hsm login</b></p>
        <p class="ol1" data-mc-autonum="2." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">2.</span></span>Create the HSM policy template file with an original filename. No file extension is required. If a template file with the same name exists, it is overwritten. </p>
        <p class="listLevel1" data-mc-conditions="Default.SA">lunash:&gt;<b>hsm showpolicies -exporttemplate</b> &lt;filename&gt;</p><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">lunash:&gt;hsm showpolicies -exporttemplate HSMPT</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">&#160;</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">&#160;</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">HSM policies successfully written.</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">&#160;</pre><pre class="listLevel1" data-mc-conditions="Default.SA">Use 'scp' from a client machine to get file named:</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">HSMPT</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">&#160;</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">&#160;</pre><pre class="listLevel1" xml:space="preserve" data-mc-conditions="Default.SA">Command Result : 0 (Success)</pre>
        <p class="ol1" data-mc-autonum="3." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">3.</span></span>On a client workstation, use <b>scp</b>/<b>pscp</b> to transfer the template file from the source appliance. </p>
        <p class="ol1" data-mc-autonum="4." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">4.</span></span>Customize the template file with a standard text editor (see <a href="#EditPT" class="MCXref xref">Editing a Policy Template</a>). </p>
        <h5>To create a partition policy template:</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Launch LunaCM and set the active slot to the partition. If you are creating a template from an initialized partition, you must log in as Partition SO. </p>
        <p class="listLevel1" style="font-weight: normal;">lunacm:&gt;<b>slot set slot</b> &lt;slotnum&gt;</p>
        <p class="listLevel1" style="font-weight: normal;">lunacm:&gt;<b>role login -name po</b></p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Create the partition policy template file. Specify an existing save directory and the desired filename. No file extension is required. If a template file with the same name exists in the specified directory, it is overwritten. </p>
        <p class="listLevel1">lunacm:&gt;<b>partition showpolicies -exporttemplate</b> &lt;filepath/filename&gt;</p><pre class="listLevel1" xml:space="preserve">lunacm:&gt; partition showpolicies -exporttemplate /usr/safenet/lunaclient/templates/ParPT</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">Partition policies for Partition: myPartition1 written to /usr/safenet/lunaclient/templates/ParPT</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">Command Result : No Error</pre>
        <h3><a name="EditPT"></a>Editing a Policy Template</h3>
        <p>Use a standard text editor to manually edit policy templates for custom configurations. This section provides template examples and customization guidelines. </p>
        <h4>HSM Policy Template Example</h4>
        <p>This example shows the contents of an HSM policy template created using the factory default policy settings. Use a standard text editor to change the policy values (0=OFF, 1=ON, or the desired value 0-255). You cannot edit the destructiveness of HSM policies. See <a href="hsm_capabilities_and_policies.htm" class="MCXref xref">HSM Capabilities and Policies</a> for more information. </p>
        <p>If you export a policy template from an uninitialized HSM, the <b>Sourced from HSM</b> header field remains blank. This field is informational and you can still apply the template. </p>
        <p>The <b>Policy Description</b> field is included in the template for user readability only. Policies are verified by the number in the <b>Policy ID</b> field. </p><pre xml:space="preserve"># Policy template FW Version 7.1.0</pre><pre># Field format - Policy ID:Policy Description:<span style="color: #ff0000;">Policy Value</span></pre><pre xml:space="preserve"># Sourced from HSM: myLunaHSM, SN: 66331</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">6:"Allow masking":<span style="color: #ff0000;">0</span></pre><pre>7:"Allow cloning":<span style="color: #ff0000;">1</span></pre><pre>12:"Allow non-FIPS algorithms":<span style="color: #ff0000;">1</span></pre><pre>15:"SO can reset partition PIN":<span style="color: #ff0000;">0</span></pre><pre>16:"Allow network replication":<span style="color: #ff0000;">1</span></pre><pre>21:"Force user PIN change after set/reset":<span style="color: #ff0000;">1</span></pre><pre>22:"Allow offboard storage":<span style="color: #ff0000;">1</span></pre><pre>23:"Allow partition groups":<span style="color: #ff0000;">0</span></pre><pre>25:"Allow remote PED usage":<span style="color: #ff0000;">0</span></pre><pre>30:"Allow unmasking":<span style="color: #ff0000;">1</span></pre><pre>33:"Current maximum number of partitions":<span style="color: #ff0000;">100</span></pre><pre>35:"Force Single Domain":<span style="color: #ff0000;">0</span></pre><pre>36:"Allow Unified PED Key":<span style="color: #ff0000;">0</span></pre><pre>37:"Allow MofN":<span style="color: #ff0000;">0</span></pre><pre>38:"Allow small form factor backup/restore":<span style="color: #ff0000;">0</span></pre><pre>39:"Allow Secure Trusted Channel":<span style="color: #ff0000;">0</span></pre><pre>40:"Decommission on tamper":<span style="color: #ff0000;">0</span></pre><pre>42:"Allow partition re-initialize":<span style="color: #ff0000;">0</span></pre><pre>43:"Allow low level math acceleration":<span style="color: #ff0000;">0</span></pre><pre>46:"Disable Decommission":<span style="color: #ff0000;">1</span></pre><pre>47:"Allow Tunnel Slot":<span style="color: #ff0000;">0</span></pre><pre xml:space="preserve">48:"Do Controlled Tamper Recovery":<span style="color: #ff0000;">1</span></pre>
        <h4>Partition Policy Template Example</h4>
        <p>This example shows the contents of a partition policy template created using the factory default policy settings. Use a standard text editor to change the policy and/or destructiveness values (0=OFF, 1=ON, or the desired value 0-255). </p>
        <p>Partition policy template entries have two additional fields: <b>Off to on destructive</b> and <b>On to off destructive</b> (see example below). Change these values to <b>0</b> or <b>1</b> to determine whether cryptographic objects on the partition should be deleted when this policy is changed in the future. Policies that lower the security level of the objects stored on the partition are normally destructive, but it may be useful to customize this behavior for your own security strategy. See <a href="partition_capabilities_and_policies.htm" class="MCXref xref">Partition Capabilities and Policies</a> for more information. </p>
        <p class="caution" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>Setting policy destructiveness to <b>0</b> (OFF) makes partitions less secure. Use this feature only if your security strategy demands it. </p>
        <p>If you export a policy template from an uninitialized partition, the <b>Sourced from partition</b> header field remains blank. This field is informational and you can still apply the template. </p>
        <p>The <b>Policy Description</b> field is included in the template for user readability only. Policies are verified by the number in the <b>Policy ID</b> field. </p><pre xml:space="preserve"># Policy template FW Version 7.1.0</pre><pre># Field format - Policy ID:Policy Description:<span style="color: #ff0000;">Policy Value</span>:<span style="color: #ff0000;">Off to on destructive</span>:<span style="color: #ff0000;">On to off destructive</span></pre><pre xml:space="preserve"># Sourced from partition: myPartition1, SN: 154438865290</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre>0:"Allow private key cloning":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>1:"Allow private key wrapping":<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>2:"Allow private key unwrapping":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>3:"Allow private key masking":<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>4:"Allow secret key cloning":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>5:"Allow secret key wrapping":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>6:"Allow secret key unwrapping":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>7:"Allow secret key masking":<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>10:"Allow multipurpose keys":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>11:"Allow changing key attributes":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>15:"Ignore failed challenge responses":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>16:"Operate without RSA blinding":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>17:"Allow signing with non-local keys":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>18:"Allow raw RSA operations":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre xml:space="preserve">20:"Max failed user logins allowed":<span style="color: #ff0000;">10</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>21:"Allow high availability recovery":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>22:"Allow activation":<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>23:"Allow auto-activation":<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre xml:space="preserve">25:"Minimum pin length (inverted  255 - min)":<span style="color: #ff0000;">248</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre xml:space="preserve">26:"Maximum pin length":<span style="color: #ff0000;">255</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>28:"Allow Key Management Functions":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>29:"Perform RSA signing without confirmation":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>31:"Allow private key unmasking":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>32:"Allow secret key unmasking":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">0</span></pre><pre>33:"Allow RSA PKCS mechanism":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre>34:"Allow CBC-PAD (un)wrap keys of any size":<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre><pre xml:space="preserve">39:"Allow Start/End Date Attributes":<span style="color: #ff0000;">0</span>:<span style="color: #ff0000;">1</span>:<span style="color: #ff0000;">0</span></pre>
        <h3 class="ntoc"><a name="Guide"></a>Guidelines and Restrictions</h3>
        <p>When creating, applying, or editing policy templates:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>You can remove a policy from the template by adding <b>#</b> at the beginning of the line or deleting the line entirely. When you apply the template, the partition will use the default values for that policy. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Partition policy templates from older Luna versions (6.x or earlier) cannot be applied to Luna 7.x partitions.</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>This version of the partition policy template feature is available on Luna 7.x user partitions only. When the active slot is set to a Luna 6.x partition, the <b>-exporttemplate</b> option is not available. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;" data-mc-conditions="Default.SA"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>If you are using Secure Trusted Channel (STC) client connections, you cannot use partition policy templates. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>The following restrictions apply when configuring partitions for Cloning or Key Export (see <a href="../CKE/cloning_key_export.htm" class="MCXref xref">Keys In Hardware vs. Private Key Export</a> for more information):</p>
        <p class="ul2" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul2Bullet"><b>•</b></span></span><b>Partition policy 0: Allow private key cloning</b> and <b>partition policy 1: Allow private key wrapping</b> can never be set to <b>1</b> (ON)&#160;at the same time. Initialization fails if the template contains a value of <b>1</b> for both policies. </p>
        <p class="ul2" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul2Bullet"><b>•</b></span></span><b>Partition policy 1: Allow private key wrapping</b> must always have <b>Off-to-on</b> destructiveness set to <b>1</b> (ON). Initialization fails if the template contains a value of <b>0</b> in this field. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>You may not use invalid policy values (outside the acceptable range), or values that conflict with your HSM or partition's capabilities. For example, <b>HSM capability 6: Enable Masking</b> is always <b>Disallowed</b>, so you cannot set the corresponding HSM policy to <b>1</b>. If you attempt to initialize an HSM or partition with a template containing invalid policy values, an error is returned and initialization fails: </p><pre class="listLevel1" xml:space="preserve">lunacm:&gt;hsm init -label myPartition1 -force -applytemplate ParPTbadvalue</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">The following values from the PPT are not compatible with the current hsm capabilities:</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">        3: Allow private key masking: 1 (Capability: 0)</pre><pre class="listLevel1" xml:space="preserve">        7: Allow secret key masking: 1 (Capability: 0)</pre><pre class="listLevel1" xml:space="preserve">       23: Allow auto-activation: 1 (Capability: 0)</pre><pre class="listLevel1" xml:space="preserve">       36: Allow Fast-Path: 1 (Capability: 0)</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">No initialization was performed.</pre><pre class="listLevel1">Error:  'hsm init' failed. (C0000102 : RC_DATA_INVALID)</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">Command Result : 65535 (Luna Shell execution)</pre>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>If you include policies that are incompatible with the current HSM's firmware, initialization fails:</p><pre class="listLevel1" xml:space="preserve">lunacm:&gt;partition init -label myPartition2 -force -applytemplate ParPTunsupported</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">The following policies are not supported. Unsupported values will be ignored.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">        9: Unsupported policy</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Error:  'hsm init' failed. (C0000102 : RC_DATA_INVALID)</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">Command Result : 65535 (Luna Shell execution)</pre>
        <h3><a name="ApplyPT"></a>Applying a Policy Template</h3>
        <p>The following procedures describe how to apply HSM and partition policy templates. </p>
        <h5>To apply a policy template to a new HSM:</h5>
        <p class="ol1Start" data-mc-autonum="1." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">1.</span></span>From a client workstation, use <b>scp</b>/<b>pscp</b> to transfer the template file to the destination appliance. </p>
        <p class="ol1" data-mc-autonum="2." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">2.</span></span>Login to LunaSH as <b>admin</b> on the destination appliance, and initialize the HSM using the policy template file. </p>
        <p class="listLevel1" data-mc-conditions="Default.SA">lunash:&gt;<b>hsm init -label</b> &lt;label&gt; <b>-applytemplate</b> &lt;filename&gt;</p>
        <p class="ol1" data-mc-autonum="3." data-mc-conditions="Default.SA"><span class="autonumber"><span class="ol1Number">3.</span></span>Verify that the template has been applied correctly by checking the partition's policy settings. </p>
        <p class="listLevel1" style="font-weight: normal;" data-mc-conditions="Default.SA">lunash:&gt;<b>hsm showpolicies</b></p>
        <h5>To apply a policy template to a new partition:</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Ensure that the template file is saved on the client workstation.</p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Launch LunaCM, set the active slot to the new partition, and initialize the partition using the policy template file. If the template file is not in the same directory as LunaCM, include the correct filepath. </p>
        <p class="listLevel1">lunacm:&gt;<b>slot set slot</b> &lt;slotnum&gt;</p>
        <p class="listLevel1">lunacm:&gt;<b>partition init -label</b> &lt;label&gt; <b>-applytemplate</b> &lt;filepath/filename&gt;</p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Verify that the template has been applied correctly by checking the partition's policy settings.</p>
        <p class="listLevel1" style="font-weight: normal;">lunacm:&gt;<b>partition showpolicies -verbose</b></p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>