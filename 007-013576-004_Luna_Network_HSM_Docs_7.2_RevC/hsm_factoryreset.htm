<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|hsm">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>hsm factoryreset</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/hsm/hsm_factoryreset.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">hsm factoryreset</h2>
        <p>Set the HSM back to its factory default settings, deleting the HSM&#160;SO, all users, and all objects. This command can be run only via a local serial connection; it is not accepted via SSH. </p>
        <p class="caution" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>This command deletes all objects and users on the HSM, leaving it in a zeroized state. </p>
        <p>This&#160;command does not require HSM login. The assumption is that your organization's physical security protocols prevent unauthorized physical access to the HSM. If those protocols failed, an unauthorized person would have no access to the HSM contents, and would be limited to temporary denial of service by destruction of HSM contents. </p>
        <p>Because this is a destructive command, you are asked 
whether to “proceed” unless the <b>-force</b> switch is provided at the command line.&#160;See <a href="../../../administration/decommission/destroy_scenarios.htm" class="MCXref xref">Comparison of Destruction/Denial Actions</a>&#160;in the <i>Administration Guide</i> to view a table that compares and contrasts various "deny access" events or actions that are sometimes confused.</p>
        <p>This command:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Erases the currently-initialized Auditor role</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Resets HSM policies<br /></p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Erases the RPV (Remote PED Vector or orange PED key authentication data)</p>
        <p class="listLevel1">The RPV data is required for Remote PED operations to function, including remote HSM&#160;initialization, if needed, so RPV&#160;must be reinstated after <b>hsm factoryreset</b> if you want to do any remote administration of the HSM. </p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>If the operation erases the RPV as described above, and you previously established a remote PED connection (using <a href="hsm_ped_connect.htm" class="MCXref xref">hsm ped connect</a>), you must tear down the remote PED connection (using <a href="hsm_ped_disconnect.htm" class="MCXref xref">hsm ped disconnect</a>) before you reinitialize the RPV and establish a new remote PED connection.  The <b>hsm factoryReset</b> command operates on the internal HSM only, and not on software processes responsible for the remote PED connection.</p>
        <h4>Related commands</h4>
        <p>This command affects only the HSM, and not the settings for other components of the appliance. The command <a href="../sysconf/sysconf_config_factoryreset.htm" class="MCXref xref">sysconf config factoryreset</a> affects appliance settings external to the HSM. To bring your entire SafeNet Luna Network HSM as close as possible to original configuration, as shipped from the factory, run both commands. </p>
        <p>If you wish to zeroize (remove all partitions, roles except Auditor, and contents) while preserving HSM policies and  the RPV - that is, zeroize before shipping the HSM off to be remotely configured - use the command <a href="hsm_zeroize.htm" class="MCXref xref">hsm zeroize</a> instead. </p>
        <h3 class="ntoc">User Privileges</h3>
        <p>Users with the following privileges can perform this command:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Admin</p>
        <h3 class="ntoc">Syntax</h3>
        <p class="code"><b>hsm factoryreset</b> [<b>-force</b>]</p>
        <table style="caption-side: top;width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" class="TableStyle-Page" cellspacing="0">
            <col class="TableStyle-Page-Column-Column1" style="width: 200px;" />
            <col class="TableStyle-Page-Column-Column1" style="width: 90px;" />
            <col class="TableStyle-Page-Column-Column1" />
            <thead>
                <tr class="TableStyle-Page-Head-Header1">
                    <th style="text-align: left;font-size: 12pt;" class="TableStyle-Page-HeadE-Column1-Header1">
                        <p> Argument(s)</p>
                    </th>
                    <th style="text-align: left;font-size: 12pt;" class="TableStyle-Page-HeadE-Column1-Header1">
                        <p>Shortcut</p>
                    </th>
                    <th style="text-align: left;font-size: 12pt;" class="TableStyle-Page-HeadD-Column1-Header1">
                        <p>Description</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-f</td>
                    <td class="TableStyle-Page-BodyA-Column1-Body1">
                        <p>Force the action without prompting.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 class="ntoc">Example</h3>
        <h4>Non-local (network connection) attempt:</h4><pre xml:space="preserve">lunash:&gt;hsm factoryreset</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Error: &#160;'hsm factoryReset' can only be run from the local </pre><pre xml:space="preserve">        console. Login as 'admin' using the serial port on </pre><pre xml:space="preserve">        the Luna SA before running this command.</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Command Result : 65535 (Luna Shell execution)<br /></pre><pre xml:space="preserve">&#160;</pre>
        <h4>Local attempt:</h4><pre xml:space="preserve">lunash:&gt;hsm factoryreset</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">CAUTION:  Are you sure you wish to reset this HSM to factory
          default settings? All partitions and data will be erased.
          Partition policies will be reverted to factory settings.
          HSM level policies will be reverted to factory settings.
          If you want to erase partitions and data only, use zeroize.
          Remote PED vector will be erased.
          Type 'proceed' to return the HSM to factory default, or
          'quit' to quit now.</pre><pre xml:space="preserve">&#160;         &gt; proceed</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">'hsm factoryReset' successful.</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Please wait while the HSM is reset to complete the process.</pre><pre xml:space="preserve">The remote PED vector (RPV) has been erased on HSM.</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Command Result : 0 (success)<a name="aanchor23"></a><MadCap:concept term="Declassify" /></pre>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>