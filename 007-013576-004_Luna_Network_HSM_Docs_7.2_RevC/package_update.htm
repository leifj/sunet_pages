<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|package">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>package update</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/package/package_update.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak"><a name="kanchor269"></a>package update</h2>
        <p class="TextHeader2">Update 
 an existing secure package on the SafeNet appliance. All packages from <span class="DefaultCompanyNameLong">Gemalto</span> are signed and encrypted and come with an authcode that must be provided to decrypt and use the package. Use this command to update packages that can be seen when using the <b>package listfile</b> command. You can verify a package with the <b>package verify</b> command.</p>
        <p class="caution" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>Use an uninterruptible power supply (UPS) to power your HSM. There is a small chance that a power failure during an update could leave your HSM in an unrecoverable condition. </p>
        <p class="notepad_note">If a version of this package is already installed, an error occurs:</p><pre xml:space="preserve">Command failed: RPM update for original filename (fwupdateK7_RealCert-7.0.2-RC2.i386.rpm)</pre>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>You must log into the HSM before you run this command. <br /></p>
        <h3 class="ntoc">User Privileges</h3>
        <p>Users with the following privileges can perform this command:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Admin</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Operator</p>
        <h3 class="ntoc">Syntax</h3>
        <p><b>package update</b> &lt;filename&gt; <b>-authcode</b> &lt;authcode&gt; [<b>-des3</b> | <b>-useevp</b>]&#160;[<b>-force</b>]</p>
        <table style="mc-table-style: url('../../../Resources/TableStyles/Page.css');width: 100%;" class="TableStyle-Page" cellspacing="0">
            <col class="TableStyle-Page-Column-Column1" style="width: 200px;" />
            <col class="TableStyle-Page-Column-Column1" style="width: 90px;" />
            <col class="TableStyle-Page-Column-Column1" />
            <thead>
                <tr class="TableStyle-Page-Head-Header1">
                    <th class="TableStyle-Page-HeadE-Column1-Header1">Argument(s)</th>
                    <th class="TableStyle-Page-HeadE-Column1-Header1">Shortcut</th>
                    <th class="TableStyle-Page-HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1">&lt;filename&gt;</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1">&#160;</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">The name of the update package file.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-authcode <span style="font-weight: normal;">&lt;authcode&gt;</span></td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-a</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Specifies the secure package authorization code provided by SafeNet with the 
secure package - the authorization code is checked during package installation 
 to ensure that the package was encrypted and signed by <span class="DefaultCompanyNameLong">Gemalto</span>.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-des3</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-d</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Use DES3 Cipher  for backward compatibility with older secure package updates (cannot be used simultaneously with <b>-useevp</b>).</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-f</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Force the action - useful when scripting; this option causes the command to proceed without confirmation. </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1" data-mc-conditions="">
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-useevp</td>
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-u</td>
                    <td class="TableStyle-Page-BodyA-Column1-Body1">Use the OpenSSL EVP (Digital EnVeloPe library) API to decrypt and validate the update package in appliance software without need for HSM SO login. If this option is not specified, the default action is to refer update verification to the HSM (cannot be used simultaneously with <b>-des3</b>).</td>
                </tr>
            </tbody>
        </table>
        <h3 class="ntoc">Example</h3><pre xml:space="preserve">lunash:&gt;package update lunasa_update-7.1.0-380.spkg -authcode 5/Rd79MAGd/G9EY5

</pre><pre xml:space="preserve">WARNING!!  Appliance software upgrade is a one-way operation: you 
cannot downgrade the appliance software. 
If you are sure that you wish to proceed, type 'proceed', otherwise type 'quit'.  &gt;proceed

</pre><pre xml:space="preserve">Command succeeded:  decrypt package</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Command succeeded:  verify package certificate</pre><pre xml:space="preserve">&#160;</pre><pre>Command succeeded:  verify package signature</pre><pre xml:space="preserve">Preparing packages...</pre><pre xml:space="preserve">lunasa_update-7.1.0-380.x86_64</pre><pre xml:space="preserve">Running update script</pre><pre xml:space="preserve">&#160;</pre><pre>Version file found.</pre><pre>Proceeding with upgrade.</pre><pre>BEGINNING UPDATE......</pre><pre xml:space="preserve">   Updating to Luna SA Release 7.1.0-380</pre><pre>&#160;</pre><pre>UNPACKING UPDATE FILES......</pre><pre>&#160;</pre><pre>VERIFYING SOFTWARE PACKAGES......</pre><pre>&#160;</pre><pre>1...Passed  2...Passed  3...Passed  4...Passed  5...Passed  6...Passed  7...Passed  8...Passed  9...Passed  10...Passed  11...Passed  12...Passed  13...Passed  14...Passed  15...Passed  16...Passed  17...Passed  18...Passed  19...Passed  20...Passed  21...Passed  22...Passed  23...Passed  24...Passed  25...Passed  26...Passed  27...Passed  28...Passed  29...Passed  30...Passed  31...Passed  32...Passed  33...Passed</pre><pre>&#160;</pre><pre>INSTALLING SOFTWARE PACKAGES......</pre><pre>&#160;</pre><pre>1...Passed  2...Passed  3...Passed  4...Passed  5...Passed  6...Passed  7...Passed  8...Passed  9...Passed  10...Passed  11...Passed  12...Passed  13...Passed  14...Passed  15...Passed  16...Passed  17...Passed  18...Passed  19...Passed  20...Passed  21...Passed  22...Passed  23...Passed  24...Passed  25...Passed  26...Passed  27...Passed  28...Passed  29...Passed  30...Passed  31...Failed  32...Failed  33...Failed</pre><pre>&#160;</pre><pre>CLEANING UP FILES......</pre><pre>&#160;</pre><pre>CLEANUP AFTER REMOVAL......</pre><pre>&#160;</pre><pre>&#160;</pre><pre>SOFTWARE UPDATE COMPLETED!</pre><pre>&#160;</pre><pre>The system MUST now be rebooted for the changes to take effect.</pre><pre>&#160;</pre><pre>Please ensure all client connections are terminated prior to rebooting the system.</pre><pre>To reboot, use the command "sysconf appliance reboot".</pre><pre>&#160;</pre><pre>Update Completed</pre><pre>&#160;</pre><pre>Copied all update log files, current and previous</pre><pre>&#160;</pre><pre>Command Result : 0 (Success)</pre>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>