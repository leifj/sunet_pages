<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>REST API: POST /api/lunasa/packageFiles</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gemalto_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">REST API
   &#160;<span id="projectnumber">7.2</span>
   </div>
   <div id="projectbrief">REST API for SafeNet Network HSMs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_package_files_post_page_name.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">POST /api/lunasa/packageFiles </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>POST /api/lunasa/packageFiles?VerifyOnly=true </h2>
<h2>POST /api/lunasa/packageFiles?VerifyOnly=false </h2>
<p>Verify or Update a secure package on appliances. This resource supports url query string. Requests to this resource need to be HTTP multipart requests and may require HSM SO authentication.</p>
<h2>Queries </h2>
<h3>VerifyOnly </h3>
<p>This query string specifies if this request is only to verify the package. When the value is set to "true", only verification is performed. Otherwise, the package will be verified and updated on appliances. </p>
<h2>Parameters </h2>
<h3>authCode </h3>
<p>This parameter specifies the authcode of the secure package. Each secure package should have its own authcode for verification or update purpose. </p>
<p>Use: <code> Required </code> </p>
<p>JSON Schema: <code> </p><pre class="fragment">    Object
    type: string
</pre><p> </code> </p>
<h3>useDes3 </h3>
<p>This parameters specifies if DES3 Cipher is used for package update or verify. It cannot be used simultaneously with EVP. </p>
<p>Use: <code> Not Required </code> </p>
<p>JSON Schema: <code> </p><pre class="fragment">    Object
    type: boolean
</pre><p> </code> </p>
<h3>useEvp </h3>
<p>This parameters specifies if OpenSSL EVP is used to decrypt and validate the package. If so, SO authentication is not required. It cannot be used simultaneously with Des3. </p>
<p>Use: <code> Not Required </code> </p>
<p>JSON Schema: <code> </p><pre class="fragment">    Object
    type: boolean
</pre><p> </code> </p>
<h2>Responses </h2>
<h3>204 </h3>
<p>No Content, Success. </p>
<h3>400 </h3>
<p>Unexpected error </p>
<h3>404 </h3>
<p>Failed to find package files </p>
<h2>Example Request </h2>
<p>The content type of the request needs to be application/vnd.safenetinc.luna+multipart. Here is an example of sending such a request using python library requests.</p>
<p><code> import requests</code></p>
<p><code> import os</code></p>
<p><code> import json</code></p>
<p><code> payload = {"authCode": "x7JTA/KPqJd56xY7", "useEvp": False, "useDes3": False}</code></p>
<p><code> files = { 'json': (None, json.dumps(payload), 'application/json') 'file': (None, open("pathToSecurePackageFile", 'rb'), 'appliaction/octet-stream') }</code></p>
<p><code> headers = {'content-type': 'application/vnd.safenetinc.luna+multipart;version=6'}</code></p>
<p><code> r = requests.request("POST", "https://1.2.3.4:8443/api/lunasa/packageFiles?VerifyOnly=false", files=files,headers=headers, verify=False) </code></p>
<h2>Example Result </h2>
<p>Result may also be a task.</p>
<p><code> </p><pre class="fragment">{
}
</pre><p> </code> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<p class="footer">
<span class="DefaultProduct">REST API for SafeNet Network HSMs</span>
<span class="DefaultRelease">7.2</span>
<span class="DefaultProjectTitle">Reference Guide</span><br />
<span class="DefaultPartNumber">007-013576-005</span>
<span class="DefaultRevision">Rev. A</span>
<span style="color: #5e5e5c;"> <![CDATA[ ]]></span><span style="color: #5e5e5c;"> <![CDATA[ ]]></span>
<span class="DefaultCopyright">Copyright 2015-2018</span>&#160;
<span class="DefaultCompanyNameLong">Gemalto.</span>
<span style="color: #5e5e5c;"> <![CDATA[ ]]></span>All rights reserved. </p>
