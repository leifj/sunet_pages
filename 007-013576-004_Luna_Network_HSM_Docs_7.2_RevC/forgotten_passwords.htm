<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Appliance Administration Guide|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Forgotten Passwords/Lost Authentication</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#sa_appliance_admin/users_passwords/forgotten_passwords.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <script type="text/javascript" language="JavaScript1.2">
        </script>
        <h2><a name="kanchor313"></a>Forgotten Passwords/Lost Authentication</h2>
        <p>Recover from a forgotten password as follows.</p>
        <h3 data-mc-conditions="Default.SA">Appliance 
Admin Password Recovery</h3>
        <p data-mc-conditions="Default.SA">If you forget your appliance admin password, you can reset by logging in to the special account called 'recover'. See <a href="recovering_or_re-setting_admin_account.htm" class="MCXref xref">Recover or Reset the Admin Account Password</a>.<br /></p>
        <h3>HSM 
 Admin/Security Officer Authentication - No Recovery</h3>
        <p> 
 If you lose the HSM Admin authentication&#160;(a password 
 for SafeNet Luna HSMs with Password Authentication; the blue PED key for SafeNet Luna HSMs with Trusted Path Authentication)

, 
 you must re-initialize the HSM, which also zeroizes the HSM&#160;(the 
 contents of the HSM become permanently unavailable, and must be replaced/regenerated 
 after you re-initialize -- allowing anyone to change or reset the appliance 
 admin password without knowing the current password would not be considered 
 good security, thus we force zeroization of all HSM contents in such a 
 situation (either you have lost access/authentication 
 to your own data/keys and therefore don't care that they are erased, or 
 an attacker is attempting to gain access and you want your data/keys made 
 unavailable, and you want to be made aware that the attack has occurred). 
 &#160;</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>You can restore from a Backup HSM if you use the 
 token's PED keys (answer <b>Yes</b> to the PED's "Reuse..." question, and <b>No</b> New Domain) when initializing 
 the HSM.) 
 <br /></p>
        <h3>Partition Roles Authentication Recovery</h3>
        <p>The Partition SO authentication is under the same restrictions as the HSM SO with the added provisons:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> For <span class="DefaultProduct">SafeNet Luna Network HSM</span>, the HSM SO cannot "reset" the Partition SO's password or blue PED key secret. For the HSM SO, any initialized partition is a "black box" that the HSM SO can create or destroy, but cannot access. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>All authentication-management actions in a partition must take place via a registered client connection, normally using the <b>role</b> commands of the LunaCM utility:</p>
        <p class="ul2" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul2Bullet"><b>•</b></span></span>The Partition SO can modify their own password or blue PED key secret using the LunaCM <b>role changepw</b> command. &#160;</p>
        <p class="ul2" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul2Bullet"><b>•</b></span></span>The Crypto Officer and Crypto User can modify their own authentication (password or black PED key secret or gray PED key secret, or challenge secret for applications) using the LunaCM <b>role changepw</b> command. &#160;</p>
        <p class="ul2" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul2Bullet"><b>•</b></span></span>The Partition SO can reset the Crypto Officer's or the Crypto User's authentication using the LunaCM <b>role resetpw</b> command only if HSM&#160;policy 15: Enable SO reset of partition PIN is enabled.</p>
        <h3 class="ntoc">Lost PED Key or Forgotten Password</h3>
        <h4>Passwords</h4>
        <p>Go to the secure lockup (a safe, an off-site secure deposit box, other) where you keep such important information, read and memorize the password. Return to the HSM&#160;and resume using it.</p>
        <h4>PED keys</h4>
        <p>Retrieve one of its copies from your on-site secure storage, or from your off-site disaster-recovery secure storage. Make any necessary replacement copies, using Luna PED, and resume using your HSM(s). </p>
        <p>If you have lost a blue PED key, someone else might have found it. Consider using <b>lunacm:&gt;changepw</b> or <b>lunash:&gt;hsm changepw</b>, as appropriate to invalidate the current blue key secret, which might be compromised, and to safeguard your HSM with a new SO secret, going forward. HSM and partition contents are preserved.</p>
        <h3 class="ntoc">Lost PED Key or Forgotten Password and No Backup</h3>
        <h4>Blue PED key or SO password</h4>
        <p>If you truly have not kept a securely stored written backup of your HSM SO Password, or for PED-authenticated HSM, your blue SO PED key, then you are out of luck. If you have access to your partition(s), immediately make backups of all partitions that have important content. When you have done what you can to safeguard partition contents, perform <b>hsm factoryreset</b>, followed by <b>hsm init</b> - this is a "hard initialization" that wipes your HSM (destroying all partitions on it) and creates a new HSM SO password or blue PED key. You can then create new partitions and restore contents from backup. Any object that was in HSM SO space (rather than within a partition) is irretrievably lost. </p>
        <h4>Red PED key or HSM/Partition domain secret</h4>
        <p>If you have the red PED key or the HSM-or-Partition domain secret for another HSM or Partition that is capable of cloning (or backup/restore) with the current HSM or Partition, then you have the domain that you need - just make a copy. Cloning or backup/restore can take place only between entities that have identical domains, so that other domain must be the same as the one you "lost".</p>
        <p>If you truly have not kept a secured written backup of your HSM or partition cloning domain, or for PED-authenticated HSM, your domain PED key(s), then you are out of luck. Any keys or objects that exist under that domain can still be used, but cannot be cloned or backed-up or restored. Begin immediately to phase in new/replacement keys/objects on another HSM, for which you have the relevant domain secret(s) or red PED key(s). Ensure that you have copies of the red PED keys, or that you have a written record of any text domain string, in secure on-site and off-site backup locations. Phase out the use of the old keys/objects, as you have no way to protect them against a damaged or lost HSM. </p>
        <h4>Orange Remote PED key</h4>
        <p>You will need to generate a new Remote PED Vector on one affected HSM with <b>lunacm:&gt;ped vector init</b> or <b>lunash:&gt;hsm ped vector init</b> to have that HSM and an orange key (plus backups) imprinted with the new RPV. Then you must physically go to all other HSMs that had the previous (lost) RPV and do the same, except you must say <b>Yes</b> to the PED's "Do you wish to reuse an existing keyset?" question, in order to bring the new RPV to all HSMs. If you forget and say <b>No</b> to the PED's "...reuse..."&#160;question, then you must start over. &#160;&#160;</p>
        <h4>White Audit PED key</h4>
        <p>You will need to initialize the audit role on any affected HSM.&#160;This creates a new Audit identity for that HSM, which orphans all records and files previously created under the old, lost audit role. The audit files that were previously created can still be viewed, but they can no longer be cryptographically verified.&#160;Remember, when performing <b>Audit init</b> on the first HSM, you can say <b>Yes</b> or <b>No</b> to Luna PED's "Do you wish to reuse an existing keyset?" question, as appropriate, but for any additional HSMs that share that audit role, you must answer <b>Yes</b>. </p>
        <h3 class="ntoc">Forgotten PED PIN</h3>
        <p>Forgetting a PED PIN&#160;is the same as not having the correct PED key. See above for options in each situation. </p>
        <p>Once a PED&#160;PIN is imposed, it is a required component of role authentication unless you arrange otherwise. You can remove the requirement for a PED PIN on a given HSM role only if you are currently able to authenticate (login) to that role. For black PED keys, you can have the SO reset your authentication. For other roles not. </p>
        <p>For blue PED keys, forgetting a PED PIN is fatal. </p>
        <p>For red PED keys, forgetting the PED&#160;PIN is eventually fatal, but you can work in the meantime while you phase out your orphaned keys and objects. </p>
        <p>Forgetting PED PINs for other roles, like losing their PED keys is just more-or-less inconvenient, but not fatal. </p>
        <h3 class="ntoc">Forgotten which PED key goes with which HSM/Partition</h3>
        <p>See your options, above. The most serious one is the blue PED key or the PED&#160;PIN&#160;for the SO role. You have only three tries to get it right. On the third wrong attempt, the HSM contents are lost. Wrong attempts are counted if you present the wrong blue PED key, or if you type the wrong PED PIN with the right PED key. </p>
        <p>For black User PED keys, and their PED PINS (if applicable) you have ten tries to get the right key or the right combination, unless the SO&#160;has changed from the default number of retries. If you are getting close to that maximum number of bad attempts, stop, and ask the SO to reset your partition PW. </p>
        <p>For other PED keys, there is no restriction on re-tries.</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>