<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-conditions="Default.SA" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Appliance Administration Guide|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Recover or Reset the Admin Account Password</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#sa_appliance_admin/users_passwords/recovering_or_re-setting_admin_account.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2><a name="kanchor144"></a><a name="kanchor145"></a><a name="kanchor146"></a><a name="kanchor147"></a>Recover or Reset the Admin Account Password</h2>
        <p><a name="kanchor148"></a><a name="kanchor149"></a><a name="kanchor150"></a>The <b>recover</b> account is a limited-purpose account that has the permanent 
(or fixed) password "PASSWORD". The <b>recover</b> account's only 
purposes are:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> to reset the password of the <b>admin</b> user, if the <b>admin</b> 
password is <a name="kanchor151"></a><a name="kanchor152"></a>lost/forgotten, or </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>to reset the entire <span class="DefaultProduct">SafeNet Luna Network HSM</span> 
appliance to blank condition (all passwords are reset, any contents [including 
 any certificates] are erased and any partitions are removed).</p>
        <p>As a security measure, <b>recover</b> can log in 
via the local serial connection only. The <b>admin</b> user's account password can be changed remotely by anyone who already knows it, but the <b>admin</b> user's password cannot be arbitrarily reset unless the person doing so has physical access to the appliance, to make the serial connection. </p>
        <p>The <b>recover</b> account does not have the following:<br /></p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Lockout<br /></p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Password expiry<br /></p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Public key authentication (you cannot access <b>recover</b> via SSH anyway)<br /></p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>SSH access<br /></p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Changeable password</p>
        <p class="caution" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>The exception to the "physical access to the appliance"&#160;statement is where you have your appliances connected to a "terminal server" that aggregates serial links and makes them accessible via telnet or similar. We do that in a test lab, where access control is not critical, and it can be very convenient when we are constantly setting up and tearing down appliances and HSM hosts for various test and verification scenarios. However, connection of your SafeNet appliances to a remotely accessible terminal server could expose an additional avenue of attack, and therefore we suggest that you always avoid allowing such a potential security opening in a production environment. <br /></p>
        <h3 class="ntoc">What to do if you ever forget or lose the admin password</h3>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Have the blue SO PED key 
available, and the Luna PED connected, powered on, and in Local PED-USB mode (see <a href="../../administration/PED_Auth/PED_hardware.htm#Changing" class="MCXref xref">Changing Modes</a>), for PED authenticated HSMs, or have the HSM password available for password authenticated HSMs.</p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Connect a serial 
terminal to the <strong>serial console connector</strong> on the <span class="DefaultProduct">SafeNet Luna Network HSM</span> rear panel. </p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Login as <b>recover</b>. </p><pre class="listLevel1" xml:space="preserve">myLuna login: recover</pre><pre class="listLevel1">Password:</pre><pre class="listLevel1" xml:space="preserve">Last login: Fri May  4 15:42:31 on ttyS0</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">WARNING !!  The recover function will stop the network interface, disable SSH</pre><pre class="listLevel1" xml:space="preserve">            service, reset the admin password to the default and then</pre><pre class="listLevel1" xml:space="preserve">            force you to change admin password from default before restarting the</pre><pre class="listLevel1" xml:space="preserve">            network interface and SSH service.  Network interface and SSH service</pre><pre class="listLevel1" xml:space="preserve">            will be re-enabled and restarted only if the recover process is successful.</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1" xml:space="preserve">If you are sure you wish to continue, type 'proceed', otherwise hit ENTER to abort.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">proceed</pre><pre class="listLevel1">Proceeding ...</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">  Please enter the HSM Administrators' password:</pre><pre class="listLevel1" xml:space="preserve">  &gt; ********</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">'hsm login' successful.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Stopping sshd:                                             [  OK  ]</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Changing password for user admin.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">You can now choose the new password.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">The password must be at least 8 characters long.</pre><pre class="listLevel1">The password must contain characters from at least 3 of the following 4 categories:</pre><pre class="listLevel1" xml:space="preserve">    - Uppercase letters (A through Z)</pre><pre class="listLevel1" xml:space="preserve">    - Lowercase letters (a through z)</pre><pre class="listLevel1" xml:space="preserve">    - Numbers (0 through 9)</pre><pre class="listLevel1" xml:space="preserve">    - Non-alphanumeric characters (such as !, $, #, %)</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">New password:</pre><pre class="listLevel1">Retype new password:</pre><pre class="listLevel1">passwd: all authentication tokens updated successfully.</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Starting sshd:                                             [  OK  ]</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Successfully performed admin password recovery. Exiting...</pre>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>If you have already initialized the HSM, then you are prompted 
 for the HSM Security Officer credential. If you have not initialized the HSM 
prior to resetting the admin password, then no credential is required.</p>
        <p class="ol1" data-mc-autonum="4."><span class="autonumber"><span class="ol1Number">4.</span></span>Login as <b>admin</b>. 
You are prompted to change the <b>admin</b> password. </p>
        <p class="ol1" data-mc-autonum="5."><span class="autonumber"><span class="ol1Number">5.</span></span>Change the <b>admin</b> password.</p>
        <p class="Bulleted">If you believe that your SafeNet Luna HSM server has not 
 been compromised, you can resume using it as before (taking care to both 
 remember and secure the <b>admin</b> password). </p>
        <h3 class="ntoc"><b>Do Not Cancel Out</b>
            <br />
        </h3>
        <p>See the "Warning" text at the beginning of the recover dialog, above. Use of the <b>recover</b> account sets the password of the <b>admin</b> account back to the factory value, and then forces a password change. Do not attempt to bypass the password change. </p>
        <p>To prevent the <b>admin</b> account being accessible over the network with a known password during the recover procedure, SSH&#160;is disabled when the recover process begins. The SSH service is re-enabled only after the password is changed. Interrupting the process and avoiding the password change leaves SSH service off at boot time. If you cancel out partway through the process in order to retain the default password, instead of changing it when prompted, you might find that you no longer have SSH access. </p>
        <p>If you encounter the problem, reconnect a local terminal and log into the <b>recover</b> account again, this time allowing it to complete the full process, ending with a proper, non-default password. If SSH service is still not available, contact Technical Support.<br /></p>
        <p class="caution" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>During recovery, the network 
service is stopped and other services are affected. The minimum-effort 
resumption would be to reboot the system, which causes all services to 
restart with current configuration. However, for safety, you should consider 
manually restarting services from the local (serial) console, until all 
passwords have been changed from their default values.</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>