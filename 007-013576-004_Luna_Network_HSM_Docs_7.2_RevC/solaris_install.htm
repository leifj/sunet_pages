<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Installation Guide|SafeNet Luna HSM Client Software Installation">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Solaris SafeNet Luna HSM Client Installation</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/List1.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#install/software/solaris_install.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">Solaris SafeNet Luna HSM Client Installation</h2>
        <p>These instructions assume that you have already acquired the SafeNet Luna HSM client software, in the form of a downloaded .tar archive.</p>
        <p>You must install the SafeNet Luna HSM client software on each client workstation you will use to access a SafeNet Luna HSM. This section describes how to install the client  on a workstation running Solaris, and contains the following topics:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Prerequisites" class="MCXref xref">Prerequisites</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Installing" class="MCXref xref">Installing the Client Software</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Controlling" class="MCXref xref">Controlling User Access to Your Attached HSMs and Partitions</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Uninstalling" class="MCXref xref">Uninstalling the SafeNet Luna HSM Client Software</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Java" class="MCXref xref">Solaris SafeNet Luna HSM Client Installation</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Scripted" class="MCXref xref">Scripted or Unattended Installation</a>
        </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span><a href="#Interrupting" class="MCXref xref">Interrupting the installation - [Ctrl] [C]</a>
        </p>
        <p>Applicability to specific versions of Solaris is summarized in the Customer Release Notes for the current release.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>Before 
installing a SafeNet system, you should confirm that the product you have received is in factory 
condition and has not been tampered with in transit. Refer 
to the Startup Guide included with your product shipment. If 
you have any questions about the condition of the product that you have 
received, contact Gemalto Support.</p>
        <p>Each computer that connects to the SafeNet Luna Network HSM appliance as a client must have the 
cryptoki library, the vtl client shell and other utilities and supporting 
 files installed. </p>
        <p>Each computer that contains, or is connected to a SafeNet Luna USB HSM or a SafeNet Luna PCIe HSM must have the cryptoki library and other utilities and supporting files installed. </p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>This example shows all the SafeNet Luna HSM client products and components. Some items are not supported on all operating systems and therefore do not appear as you proceed through the installation script.</p>
        <h3><a name="Prerequisites"></a>Prerequisites</h3>
        <p>Before starting the installation, ensure that you have satisfied the following prerequisites:</p>
        <h4>Random Number Generator 
(RNG) or Entropy Gathering Daemon (EGD)</h4>
        <p>Ensure that you have a Random Number Generator 
 (RNG) or Entropy Gathering Daemon (EGD) on your system 
 in one of the following locations:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>/dev/egd-pool</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> /etc/egd-pool,</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> /etc/entropy</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>/var/run/egd-pool</p>
        <h4>RNG/EGD</h4>
        <p>Cryptographic algorithms, including those that assure the security of 
communication – such as in OpenSSL and other protocols – depend upon random 
numbers for the creation of strong keys and certificates. A readily available 
source of random data is the entropy that exists in complex computer processes. Utilities exist for every operating system, to gather bits of system entropy 
into a pool, which can then be used by other processes. </p>
        <p>Windows and Linux have these installed by default. Other systems might not. See your system administrator.</p>
        <h4>Entropy Pool</h4>
        <p>In the case of SafeNet Luna Network HSM, the SafeNet Luna HSM Client administration tool (<b>vtl</b>) expects 
to find a source of randomness at <b>/dev/random</b>. If one is not found, <b>vtl</b> 
fails, because the link cannot be secured from the Client end. </p>
        <p>If your system does have an entropy pool, but the random number generator 
 (RNG) is not in the expected place, then you can create a symbolic link between the actual location and one of the following:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>/dev/random</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> /dev/egd-pool</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> /etc/egd-pool</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>/etc/entropy</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>/var/run/egd-pool</p>
        <p>If your system does not have an entropy-gathering daemon or random number 
generator, please direct your system administrator to install one, and 
point it to one of the named devices. </p>
        <h3><a name="Installing"></a>Installing the Client Software</h3>
        <p>It is recommended that you refer to the SafeNet Luna HSM Customer Release Notes for any installation-related issues or instructions before you begin the following software installation process. </p>
        <p class="caution" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;CAUTION!&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>CAUTION!</b> &#160;&#160;</span></span></span>You must be logged in as <b>root</b> when you run the installation script.</p>
        <p>By default, the Client programs are installed in the <b>/opt/safenet/lunaclient/bin</b> directory. </p>
        <h5>To install the SafeNet Luna HSM client software on a Solaris workstation:</h5>
        <p class="ol1" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Log on to the 
client system, open a console or terminal window, and use <b>su</b> to gain administrative permissions for the installation. </p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Access the SafeNet Luna HSM client software: </p>
        <p class="ol2Start" data-mc-autonum="a."><span class="autonumber"><span class="ol2Number">a.</span></span>Copy or move the <b>.tar</b> archive to a suitable directory where you can untar the archive and launch the installation script. </p>
        <p class="ol2" data-mc-autonum="b."><span class="autonumber"><span class="ol2Number">b.</span></span>Extract the contents from the archive:</p>
        <p class="listLevel2"><b>tar xvf</b> &lt;filename&gt;<b>.tar</b></p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Go to the install directory for your architecture:</p>
        <table style="width: 97%;mc-table-style: url('../../Resources/TableStyles/List1.css');" class="TableStyle-List1" cellspacing="0">
            <col class="TableStyle-List1-Column-Column1" />
            <col class="TableStyle-List1-Column-Column1" />
            <thead>
                <tr class="TableStyle-List1-Head-Header1">
                    <th class="TableStyle-List1-HeadE-Column1-Header1">Architecture</th>
                    <th class="TableStyle-List1-HeadD-Column1-Header1">Path</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris Sparc 32-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris10Sparc/32</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris Sparc 64-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris10Sparc/64</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris Sparc 32-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris11Sparc/32</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris Sparc 64-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris11Sparc/64</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris x86 32-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris10x86/32</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris x86 64-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris10x86/64</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyE-Column1-Body1">Solaris x86 32-bit</td>
                    <td class="TableStyle-List1-BodyD-Column1-Body1">LunaClient_7.1.0_Solaris11x86/32</td>
                </tr>
                <tr class="TableStyle-List1-Body-Body1">
                    <td class="TableStyle-List1-BodyB-Column1-Body1">Solaris x86 64-bit</td>
                    <td class="TableStyle-List1-BodyA-Column1-Body1">LunaClient_7.1.0_Solaris11x86/64</td>
                </tr>
            </tbody>
        </table>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>Not all platforms are supported with each release, so the available install options might not match the list above. Refer to the Customer Release Notes for more information.<br /></p>
        <p class="ol1" data-mc-autonum="4."><span class="autonumber"><span class="ol1Number">4.</span></span>To see the help, or a list of available installer options, type:</p>
        <p class="listLevel1"><b>sh install.sh -?</b>&#160;or <b>sh install.sh --help</b></p>
        <p class="listLevel1">To install all available products and optional components, type:</p>
        <p class="listLevel1"><b>sh install.sh all</b>
        </p>
        <p class="listLevel1">To selectively install individual products and optional components, type the command without arguments:</p>
        <p class="listLevel1"><b>sh install.sh</b>
        </p>
        <p class="ol1" data-mc-autonum="5."><span class="autonumber"><span class="ol1Number">5.</span></span>Type <b>y</b> 
if you agree to be bound by the license agreement. <br /></p>
        <p class="ol1" data-mc-autonum="6."><span class="autonumber"><span class="ol1Number">6.</span></span>A list of installable SafeNet products is displayed (might be different, depending on your platform). Select as many as you require, by typing the number of each (in any order) and pressing <b>Enter</b>. As each item is selected, the list updates, with a "*" in front of any item that has been selected. The following example shows that items 1 and 3 have been selected, and item 4 is about to be selected.</p><pre class="listLevel1" xml:space="preserve">Products
Choose Luna Products to be installed<br style="mc-tag-and-class: ;" />&#160;&#160;&#160; *[1]: SafeNet Luna Network HSM &#160;&#160;&#160;&#160;&#160;
     [2]: SafeNet Luna PCIe HSM &#160;&#160;<br style="mc-tag-and-class: ;" />    *[3]: SafeNet Luna USB HSM &#160;<br style="mc-tag-and-class: ;" />     [4]: SafeNet Luna Backup HSM &#160;&#160;</pre><pre class="listLevel1" xml:space="preserve">     [N|n]: Next
     [Q|q]: Quit<br style="mc-tag-and-class: ;" />Enter selection: 4   <br />        </pre>
        <p class="ol1" data-mc-autonum="7."><span class="autonumber"><span class="ol1Number">7.</span></span>When the selection is complete, type <b>N</b> or <b>n</b> for "Next", and press  <b>Enter</b>. If you wish to make a change, simply type a number again and press <b>Enter</b> to de-select a single item. </p>
        <p class="ol1" data-mc-autonum="8."><span class="autonumber"><span class="ol1Number">8.</span></span>The next list is titled "Advanced" and includes additional items to install. Some items might be pre-selected to provide the optimum SafeNet Luna HSM experience for the majority of customers, but you can change any selection in the list. When the Components list is adjusted to your satisfaction, press <b>Enter</b>.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>  The installer includes the SafeNet SNMP Subagent as an option. If you select this option, you will need to move the SafeNet MIB files to the appropriate directory for your SNMP application after installation is complete, and you will need to start the SafeNet subagent and configure for use with your agent. See the <i>Administration Guide</i> for more information.&#160;</p>
        <p class="ol1" data-mc-autonum="9."><span class="autonumber"><span class="ol1Number">9.</span></span>If the script detects an existing cryptoki library, it stops and suggests that you uninstall your previous SafeNet software before starting the SafeNet Luna HSM Client installation again. </p>
        <p class="ol1" data-mc-autonum="10."><span class="autonumber"><span class="ol1Number">10.</span></span>The system installs all packages related to the products and any optional components that you selected.</p>
        <p class="caution_note">As a general rule, do not modify the Chrystoki.conf/crystoki.ini 
file, unless directed to do so by Gemalto Technical Support. If you do modify the file, never insert TAB characters - use individual 
 space characters. Avoid modifying the PED timeout settings. These are now hardcoded in the appliance, 
but the numbers in the Chrystoki.conf file must match.</p>
        <h3 data-mc-conditions=""><a name="Controlling"></a>Controlling User Access to Your Attached HSMs and Partitions</h3>
        <p data-mc-conditions="">By default, only the root user has access to your attached HSMs and partitions. You can specify a set of non-root users that are permitted to access your attached HSMs and partitions, by adding them to the <b>hsmusers</b> group.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;" data-mc-conditions=""><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>The client software installation automatically creates the <b>hsmusers</b> group if one does not already exist on your system. The <b>hsmusers</b> group is retained when you uninstall the client software, allowing you to upgrade your client software while retaining your <b>hsmusers</b> group configuration.</p>
        <h4 data-mc-conditions="">Adding users to hsmusers group</h4>
        <p data-mc-conditions="">To allow non-root users or applications access your attached HSMs and partitions, assign the users to the <b>hsmusers</b> group. The users you assign to the <b>hsmusers</b> group must exist on the client workstation. Users you add to the <b>hsmusers</b> group are able to access your attached HSMs and partitions. Users who are not part of the <b>hsmusers</b> group are not able to access your attached HSMs and partitions.</p>
        <h5 data-mc-conditions="">To add a user to hsmusers group</h5>
        <p class="ol1Start" data-mc-autonum="1." data-mc-conditions=""><span class="autonumber"><span class="ol1Number">1.</span></span>Ensure that you have <b>sudo</b> privileges on the client workstation.</p>
        <p class="ol1" data-mc-autonum="2." data-mc-conditions=""><span class="autonumber"><span class="ol1Number">2.</span></span>Add a user to the <b>hsmusers</b> group:</p>
        <p class="listLevel1" data-mc-conditions=""><b>sudo gpasswd --add</b> &lt;username&gt; <b>hsmusers</b></p>
        <p class="listLevel1" data-mc-conditions="">where &lt;username&gt; is the name of the user you want to add to the <b>hsmusers</b> group.</p>
        <h4 data-mc-conditions=""><a name="hsmusers_delete"></a>Removing users from hsmusers group</h4>
        <p data-mc-conditions="">Should you wish to rescind a user's access to your attached HSMs and partitions, you can  remove them from the <b>hsmusers</b> group.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;" data-mc-conditions=""><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>The user you delete will continue to have access to the HSM until you reboot the client workstation.</p>
        <h5 data-mc-conditions="">To remove a user from hsmusers group</h5>
        <p class="ol1Start" data-mc-autonum="1." data-mc-conditions=""><span class="autonumber"><span class="ol1Number">1.</span></span>Ensure that you have <b>sudo</b> privileges on the client workstation.</p>
        <p class="ol1" data-mc-autonum="2." data-mc-conditions=""><span class="autonumber"><span class="ol1Number">2.</span></span>Remove a user from the <b>hsmusers</b> group:</p>
        <p class="listLevel1" style="font-weight: normal;" data-mc-conditions=""><b>sudo gpasswd -d</b> &lt;username&gt; <b>hsmusers</b></p>
        <p class="listLevel1" style="font-weight: normal;" data-mc-conditions="">where &lt;username&gt; is the name of the user you want to remove from the <b>hsmusers</b> group. You must log in again to see the change.</p>
        <h3><a name="Uninstalling"></a>Uninstalling the SafeNet Luna HSM Client Software</h3>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span><b>cd /opt/safenet/lunaclient/bin</b>
            <br />
        </p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span><b>sh uninstall.sh</b>
        </p>
        <h3>Java (JSP or JCPROV)</h3>
        <p>During the installation, the script provides the opportunity to install SafeNet Java components. If you select Java components, the SafeNet Java files are installed below <b>/opt/safenet/lunaclient/jsp/</b> for JSP and <b>/opt/safenet/lunaclient/jcprov/</b> for JCPROV. In order to use Java, you must have separately installed Java (JDK&#160;or run-time environment from the vendor of your choice) onto your system. </p>
        <h5>To install JSP</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Copy the SafeNet Java library and jar files from their default location under <b>/opt/safenet/lunaclient/jsp/lib</b> to the Java environment directory, for example <b>/opt/jre/lib/ext</b>.</p>
        <p>The exact directory might differ depending on where you obtained your Java system, the version, and any choices that you made while installing and configuring it. </p>
        <h5>To install JCPROV</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Copy the SafeNet JCPROV library and jar files from their default location under <b>/opt/safenet/lunaclient/jcprov/lib</b> to the Java environment directory, for example <b>/opt/jre/lib/ext</b>.</p>
        <p>For additional Java-related information, see <a href="../../sdk/java/java.htm" class="MCXref xref">Java Interfaces</a> in the <i>SDK Reference Guide</i>.</p>
        <h4>JSP Static Registration</h4>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>This section applies to JSP, not to JCPROV. &#160;</p>
        <p>You would choose static registration of providers if you want all applications to default to the SafeNet provider.</p>
        <p>Once your client has externally logged in using <b>salogin</b> or your own HSM-aware utility, any application would be able to use SafeNet product without being designed to log in to the HSM Partition.</p>
        <p>Edit the <b>java.security</b> file located in the <b>/jre/lib/security</b> directory of your Java SDK/JRE installation to read as follows:</p>
        <p><code>security.provider.1=sun.security.provider.Sun</code>
        </p>
        <p><code>security.provider.2=com.sun.net.ssl.internal.ssl.Provider</code>
        </p>
        <p><code>security.provider.3=com.safenetinc.luna.provider.LunaProvider</code>
        </p>
        <p><code>security.provider.4=com.sun.rsajca.Provider</code>
        </p>
        <p><code>security.provider.5=com.sun.crypto.provider.SunJCE</code>
        </p>
        <p><code>security.provider.6=sun.security.jgss.SunProvider</code>
        </p>
        <p>You can set our provider in first position for  efficiency if SafeNet Luna HSM operations are your primary mode. However, if your application needs to perform operations not supported by the LunaProvider (secure random generation or random publickey verification, for example) then it would receive error messages from the HSM and would need to handle those gracefully before resorting to providers further down the list. We have found that having our provider in third position works well for most applications.</p>
        <p>The modifications in the <b>java.security</b> file are global, and they might result in the breaking of another application that uses the default KeyPairGenerator without logging into the SafeNet Luna Network HSM first. This consideration might argue for using dynamic registration, instead.</p>
        <h4>JSP Dynamic Registration</h4>
        <p>For your situation, you may prefer to employ dynamic registration of Providers, in order to avoid possible negative impacts on other applications running on the same machine. As well, the use of dynamic registration allows you to keep installation as straightforward as possible for your customers.</p>
        <h3>Removing components</h3>
        <p>To uninstall the JSP component or the JCPROV component, you must manually remove them from the locations where they were copied. </p>
        <p><b>sh uninstall.sh</b>
        </p>
        <h3><a name="Scripted"></a>Scripted or Unattended Installation</h3>
        <p>If you prefer to run the installation from a script, rather than interactively, run the command with the options <b>-p</b> &lt;list of SafeNet products&gt; and <b>-c</b> &lt;list of SafeNet components&gt;. To see the syntax, run the command with <b>help</b> like this:</p><pre xml:space="preserve">[myhost]$ sudo sh install.sh help</pre><pre xml:space="preserve">[sudo] password for fred</pre><pre xml:space="preserve">

At least one product should be specified.

usage:
        install.sh      - Luna Client install through menu
        install.sh help - Display scriptable install options
        install.sh all  - Complete Luna Client install

        install.sh -p [sa|pci|g5|rb] [-c sdk|jsp|jcprov|ldpc|snmp]

        -p &lt;list of Luna products&gt;
        -c &lt;list of Luna components&gt;  - Optional. All components are installed if not provided

Luna products options
   sa     - SafeNet Luna Network HSM
   pci    - SafeNet Luna PCIe HSM
   g5     - SafeNet Luna USB HSM
   rb     - SafeNet Luna Backup HSM

Luna components options
   sdk    - Luna SDK
   jsp    - Luna JSP (Java)
   jcprov - Luna JCPROV (Java)
   snmp   - Luna SNMP subagent


[myhost]$
&#160;&#160;&#160;&#160;</pre>
        <p>For scripted/automated installation, your script will need to capture and respond to the License Agreement prompt, and to the confirmation prompt. For example: &#160;&#160;</p><pre xml:space="preserve">
[myhost]$ sudo sh install.sh all 

IMPORTANT: The terms and conditions of use outlined in the software 
license agreement (Document #008-010005-001_053110) shipped with the product 
("License") constitute a legal agreement between you and SafeNet Inc.
Please read the License contained in the packaging of this 
product in its entirety before installing this product.

Do you agree to the License contained in the product packaging?

If you select 'yes' or 'y' you agree to be bound by all the terms 
and conditions se out in the License.

If you select 'no' or 'n', this product will not be installed. 

(y/n) <b>y</b>

Complete Luna Client will be installed. This includes SafeNet Luna Network HSM,
SafeNet Luna PCIe HSM, SafeNet Luna USB HSM AND SafeNet Luna Backup HSM.

Select 'yes' or 'y' to proceed with the install.

Select 'no' or 'n', to cancel this install. 

Continue (y/n)? &#160;<b>y</b>  </pre>
        <h3><a name="Interrupting"></a>Interrupting the installation - [Ctrl] [C]</h3>
        <p>Do not interrupt the installation script in progress, and ensure that your host computer is served by an uninterruptible power supply (UPS). If you press [Ctrl] [C], or otherwise interrupt the installation (OS problem, power outage, other), some components will not be installed. It is not possible to resume an interrupted install process. The result of an interruption depends on where, in the process, the interruption occurred (what remained to install before the process was stopped).</p>
        <p>As long as the cryptoki package is installed, any subsequent installation attempt results in refusal with the message "A version of Luna Client is already installed." Removing the library allows the script to clean up remaining components, so that you can install again. </p>
        <h5>What to do if installation is incomplete or damaged</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>If SNFTlibcryptoki has been installed, uninstall it manually. </p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Run the Client install script again. Now that SNFTlibcryptoki  is removed, the install script removes any stray packages and files. </p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Install again, to perform a clean installation. </p>
        <h3>After Installation</h3>
        <p>When you have installed the software onto a Client, 
the next task is to configure the SafeNet Luna HSM, as described in the <i>Configuration Guide</i>.</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>