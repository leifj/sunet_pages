<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Configuration Guide|Configure the SafeNet Appliance for Your Network">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Binding Your NTLS or SSH Traffic to a Device</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#configuration/appliance_config/ntls_ssh_binding.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2><a name="kanchor377"></a><a name="kanchor378"></a>Binding Your NTLS or SSH Traffic to a Device</h2>
        <p>You can configure your appliance to restrict NTLS or SSH traffic to a specific network device (or IP address for SSH traffic):</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>NTLS is used to securely transport the cryptographic messages exchanged between a client and the HSM&#160;across the network. You must bind your NTLS traffic to a specific network device, a bonded network device, or all network devices. </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>SSH is used to securely transport the administrative messages exchanged between LunaSH and the appliance or HSM&#160;across the network. By default, SSH&#160;traffic is unrestricted. SSH binding is optional. </p>
        <h3>Binding Your NTLS Traffic</h3>
        <p>By default, the network trust link service (NTLS) is bound to all devices (0.0.0.0). To use the <span class="DefaultProduct">SafeNet Luna Network HSM</span> on your network, you must bind NTLS to one of the following:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>A specific device (eth0, eth1, eth2 or eth3)</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>All devices (eth0, eth1, eth2 and eth3)</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> A bonded device (bond0 or bond1). See <a href="../../sa_appliance_admin/client_connections/port_bonding.htm" class="MCXref xref">SafeNet Luna Network HSM Appliance Port Bonding</a> in the <i>Appliance Administration Guide</i> for more information.</p>
        <p>Use the LunaSH <b>ntls bind</b> command 
to bind the service. The device you configure is not used until the following conditions are met:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>it has been configured with a valid IP address</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>it is active on the network</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>the NTLS service is restarted</p>
        <p>This allows you to preconfigure the NTLS binding and have it become active only after you have completed your network configuration.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>When two or more of the appliance's network interfaces are configured to operate on the same subnetwork, a known Linux networking issue can result in a lost connection due to ARP flux. To avoid this, configure the network interfaces to operate on different subnetworks.</p>
        <h5>To bind your NTLS traffic to a device</h5>
        <p>Use the <b>ntls bind</b> 
command: to bind the NTLS traffic to a network device (eth0, eth1, eth2, eth3, bond0, bond1, all). You can use the <b>ntls show</b> command to see the current binding.</p>
        <h4>Example</h4><pre xml:space="preserve">lunash:&gt;ntls bind eth0</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">NTLS binding set to network device eth0.</pre><pre xml:space="preserve">You must restart the NTLS service for the new settings to take effect.</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">If you are sure that you wish to restart NTLS, then type 'proceed', otherwise type 'quit'</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&gt; proceed</pre><pre xml:space="preserve">Proceeding...</pre><pre xml:space="preserve">Restarting NTLS service...</pre><pre xml:space="preserve">Stopping ntls:                                             [  OK  ]</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Starting ntls:                                             [  OK  ]</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Command Result : 0 (Success)</pre>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: #6c286b;&quot; class=&quot;mcFormatColor&quot;&gt; &lt;b&gt;NOTE&lt;/b&gt; &#160;&#160;&lt;/span&gt;"><span class="autonumber"><span><span style="color: #6c286b;" class="mcFormatColor"> <b>NOTE</b> &#160;&#160;</span></span></span>The “Stopping ntls” operation might fail in the above example, because NTLS 
is not yet running on a new HSM appliance. Just ignore the message. </p><pre xml:space="preserve">lunash:&gt;ntls show</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">NTLS is currently bound to IP Address: "192.20.11.78" (eth0)</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Command Result : 0 (Success)</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">lunash:&gt;ntls bind eth1</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">NTLS binding set to network device eth1.</pre><pre xml:space="preserve">You must restart the NTLS service for the new settings to take effect.</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">If you are sure that you wish to restart NTLS, then type 'proceed', otherwise type 'quit'</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&gt; proceed</pre><pre xml:space="preserve">Proceeding...</pre><pre xml:space="preserve">Restarting NTLS service...</pre><pre xml:space="preserve">Stopping ntls:                                             [  OK  ]</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Starting ntls:                                             [  OK  ]</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">Command Result : 0 (Success)</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">lunash:&gt;ntls show</pre><pre xml:space="preserve">&#160;</pre><pre>NTLS is configured to bind to eth1, but it is not active at this time.</pre><pre>NTLS will bind to eth1 if it's active and has a valid IP address when NTLS restarts.</pre><pre xml:space="preserve">NTLS is currently bound to IP Address: "192.20.11.78" (eth0)</pre><pre xml:space="preserve">&#160;</pre><pre>Command Result : 0 (Success)</pre>
        <h3>Binding Your SSH Traffic</h3>
        <p>You can optionally bind your SSH traffic a specific device (eth0, eth1, eth2, eth3, all) on the appliance or to a specific IP address. By default, SSH&#160;traffic is unrestricted.</p>
        <h5>To bind your SSH traffic to a device or IP address</h5>
        <p>Use the <b>sysconf ssh</b> 
command to bind the SSH traffic to a device or IP address, as follows:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span> To bind to a specific device, use the syntax <b>sysconf ssh device</b> &lt;netdevice&gt;. For example:</p><pre class="listLevel1" xml:space="preserve">lunash:&gt;sysconf ssh device eth1</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">Success:  SSH now restricted to ethernet device eth1 (ip address 192.168.255.2).</pre><pre class="listLevel1">Restarting ssh service.</pre><pre class="listLevel1">Stopping sshd:                                               [  OK  ]</pre><pre class="listLevel1">Starting sshd:                                               [  OK  ]</pre><pre class="listLevel1">Command Result : 0 (Success)</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">[myluna] lunash:&gt;sysconf ssh show</pre><pre class="listLevel1" xml:space="preserve">&#160;</pre><pre class="listLevel1">SSHD configuration:</pre><pre class="listLevel1">SSHD Listen Port: 22 (Default)</pre><pre class="listLevel1">SSH is restricted to ethernet device eth1 (ip address 192.168.255.2).</pre><pre class="listLevel1">Password   authentication is enabled</pre><pre class="listLevel1">Public key authentication is enabled</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Command Result : 0 (Success)</pre>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>To bind to an IP address or host name, use the syntax <b>sysconf ssh ip</b> &lt;IP_address&gt;. For example:</p><pre class="listLevel1">lunash:&gt;sysconf ssh ip 192.20.10.200</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1">Success:  SSH now restricted to ethernet device eth0 (ip address 192.20.10.200).</pre><pre class="listLevel1">Restarting ssh service.</pre><pre class="listLevel1">Stopping sshd:                                [  OK  ]</pre><pre class="listLevel1">Starting sshd:                                [  OK  ]</pre><pre class="listLevel1">&#160;</pre><pre class="listLevel1" xml:space="preserve">Command Result : 0 (Success)</pre>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>