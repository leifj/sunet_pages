<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|partition">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>partition restore</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/partition/partition_restore.htm">Show Navigation</a>
        </p>
        <!-- Remove this comment to enable syntax highlighting		
        <script type="text/javascript" src="../Stylesheets/SyntaxHilite/Prism/prism.js"></script>
-->
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: none;border-bottom-width: 0px;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_network.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="nocontent">
                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span>
                            </div>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">partition restore</h2>
        <p> Restores the contents of an HSM partition from a backup token. This command securely moves contents from a backup token to an HSM partition on the HSM. The SafeNet Luna Network HSM administrator executing this command has the option of replacing the objects existing on the HSM partition or adding to them. Note that if objects are added to the HSM partition it is possible that the same object may exist twice on the HSM partition with two different object handles.</p>
        <p>Because replacing data in a partition is destructive, if this option is selected the user is prompted to proceed/quit.</p>
        <p>If the passwords are not provided via the command line, the user is prompted for them interactively. User input is echoed as asterisks.</p>
        <h3 class="ntoc">User Privileges</h3>
        <p>Users with the following privileges can perform this command:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Admin</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;&amp;gt;&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>&gt;</b></span></span>Operator</p>
        <h3 class="ntoc">Syntax</h3>
        <p><b>partition restore -partition</b> &lt;name&gt; <b>-tokenpar</b> &lt;name&gt; <b>-serial</b> &lt;serialnum&gt; {<b>-add</b> | <b>-replace</b>} [<b>-password</b> &lt;password&gt;] [<b>-tokenpw</b> &lt;password&gt;] [<b>-force</b>]</p>
        <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" class="TableStyle-Page" cellspacing="0">
            <col class="TableStyle-Page-Column-Column1" style="width: 200px;" />
            <col class="TableStyle-Page-Column-Column1" style="width: 90px;" />
            <col class="TableStyle-Page-Column-Column1" />
            <thead>
                <tr class="TableStyle-Page-Head-Header1">
                    <th class="TableStyle-Page-HeadE-Column1-Header1">Argument(s)</th>
                    <th class="TableStyle-Page-HeadE-Column1-Header1">Shortcut</th>
                    <th class="TableStyle-Page-HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-add</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-a</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">
                        <p>Use this switch (no argument) to specify that the data objects on the backup token shall be added to those already existing on the specified HSM Partition. Note that even objects on the backup token that are identical to objects in the HSM Partition will be added to the HSM Partition when specifying this switch; thus it is possible that the HSM Partition may have two identical objects on it as a result of this command.</p>
                        <p>You must specify either <b>-add</b> or <b>-replace</b>.</p>
                    </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-f</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Force the action without prompting.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-partition <span style="font-weight: normal;">&lt;name&gt;</span></td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-par</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Specifies the name of the HSM partition from which all data/key objects are to be restored. Obtain the HSM partition name by using the <b>partition -list</b> command. </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-password <span style="font-weight: normal;">&lt;password&gt;</span></td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-pas</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">
                        <p>Specifies the HSM Partition Owner's (or Crypto Officer's)  text password. </p>
                        <p>This parameter is mandatoryfor password-authenticated HSMs. It is ignored on PED-authenticated HSMs.</p>
                    </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-replace</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-r</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">
                        <p>Use this switch (no argument) to erase any data/key objects existing on the specified HSM Partition before loading the keys from the backup token.</p>
                        <p>You must specify either <b>-add</b> or <b>-replace</b>.</p>
                    </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-serial <span style="font-weight: normal;">&lt;serialnum&gt;</span></td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-s</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Specifies the token serial number.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-tokenpar <span style="font-weight: normal;">&lt;name&gt;</span></td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-tokenpa</td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Specifies the token partition name.</td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-tokenpw <span style="font-weight: normal;">&lt;password&gt;</span></td>
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-tokenpw</td>
                    <td class="TableStyle-Page-BodyA-Column1-Body1">
                        <p> The password for the user on the backup token. If this is a Secure Authentication &amp; Access Control token, then Luna PED is required and any value provided here is ignored. If you do not enter this parameter you will be prompted for it.</p>
                        <p>This parameter is mandatoryfor password-authenticated HSMs. It is ignored on PED-authenticated HSMs.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 class="ntoc">Example</h3><pre xml:space="preserve">lunash:&gt;partition restore -partition sa78par1 -tokenpar sa78par1backup -size 496771 -add</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">&#160;</pre><pre xml:space="preserve">  Please enter the password for the token user partition:</pre><pre xml:space="preserve">  &gt; ********</pre><pre>&#160;</pre><pre xml:space="preserve">  Please enter the password for the HSM user partition:</pre><pre xml:space="preserve">  &gt; ********</pre><pre>&#160;</pre><pre>Object "MT RSA 4096-bit Private KeyGen" (handle 14) cloned to handle 46 on target</pre><pre>Object "MT RSA 4096-bit Public KeyGen" (handle 18) cloned to handle 49 on target</pre><pre>Object "MT RSA 4096-bit Private KeyGen" (handle 19) cloned to handle 52 on target</pre><pre>Object "MT RSA 4096-bit Public KeyGen" (handle 23) cloned to handle 48 on target</pre><pre>Object "MT RSA 4096-bit Private KeyGen" (handle 24) cloned to handle 57 on target</pre><pre>Object "MT RSA 4096-bit Public KeyGen" (handle 28) cloned to handle 70 on target</pre><pre>'partition restore' successful.</pre><pre>&#160;</pre><pre>&#160;</pre><pre>Command Result : 0 (Success)</pre>
        <p class="footer"><span class="DefaultProduct">SafeNet Luna Network HSM</span> <span class="DefaultRelease">7.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-013576-004</span> <span class="DefaultRevision">Rev. C</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">06 May 2019</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2019</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>