<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Administration Guide|Remote PED">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Client-initiated Remote PED &#160;</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template_Enterprise.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><span class="MCBreadcrumbsSelf">Administration Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="remote_ped.htm">Remote PED</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Client-initiated Remote PED</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2>Client-initiated Remote PED &#160;</h2>
        <p>At this point, you have a Remote PED Vector (RPV) shared between at least one orange PED Key and at least one HSM. The RPV is the means by which a Remote PED server authenticates to an HSM, allowing the HSM to accept other PED Key values (blue, red, black, gray, white, purple) from a SafeNet PED that is not directly, physically connected. </p>
        <p>The following section details how to launch that connection from the HSM host (which is considered the client in the Remote PED world). If you have firewall or other constraints that prevent the initiation of a connection from your HSM host out to the PedServer in the external network, then see <a href="server-initiated_remote-ped.htm" class="MCXref xref">Server-initiated (Peer-to-Peer) Remote PED Connection</a>, instead. The general process for client-initiated Remote PED is the same for </p>
        <p>&#160;</p>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Bring a SafeNet PED 2 with Remote PED capability, the  PED Keys (blue and black and red), and at least one imprinted orange PED Key to the location of your workstation computer (anywhere in the world with a suitable network connection). You should already have the most recent PED driver software and the PedServer.exe software installed on that computer.</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>The software and driver are provided on the SafeNet  Client CD, but are optional during the installation process. If you intend to use Remote PED (and therefore need the PED driver and the PedServer executable program), ensure that Remote PED is among the options selected during installation. Alternatively, you can launch the installer at a later time and modify the existing SafeNet HSM Client installation to include Remote PED at that time.<br /><br />When you connect your SafeNet PED2 Remote to electrical mains power (AC power outlet) and to your computer's USB port, the operating system detects the new hardware and should locate the appropriate driver. If that does not happen, then the system presents a dialog for you to help it find the location where the LunaPED driver has been placed.  &#160;&#160;&#160;<br /><br /></p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Connect the Remote PED to its power source via the power adapter.<br /><br /></p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Connect the Remote PED to the workstation computer via the USB cable. <br /><br /></p>
        <p class="ol1" data-mc-autonum="4."><span class="autonumber"><span class="ol1Number">4.</span></span>When the PED powers on and completes its self-test, it is in Local PED mode by default. <br />Press the [&lt;] key to reach the "Select Mode" menu. <br />Press [7] to enter Remote PED mode.<br /><br /></p>
        <p class="ol1" data-mc-autonum="5."><span class="autonumber"><span class="ol1Number">5.</span></span>Open a Command Prompt window on the computer (for Windows 7, this must be an Administrator Command Prompt), locate and run PedServer.exe &#160;(we suggest that you try it out beforehand, to become familiar with the modes and options - if you experience any problem with PED operation timeout being too short, use "PedServer -mode config -set &lt;value in seconds&gt;" to increment the "sreadrsptimeout" value).<br />Set PedServer.exe to its "listening" mode.<br /><span style="font-family: monospace;">c: &gt; PedServer -m start</span><br style="font-family: monospace;" /><span style="font-family: monospace;">Ped Server Version 1.0.5 (10005) </span><br style="font-family: monospace;" /><span style="font-family: monospace;"> Ped Server launched in startup mode.  </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Starting background process  </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Background process started  </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Ped Server Process created, exiting this process.</span><br style="font-family: monospace;" /><span style="font-family: monospace;">c:\PED\ &gt;</span><br />NOTE: if you encounter a message "Failed to load configuration file...", this is not an error. It just means that you have not changed the default configuration, so no file has been created. The server default values are used.<br /><br /></p>
        <p class="ol1" data-mc-autonum="6."><span class="autonumber"><span class="ol1Number">6.</span></span>Open an ssh session to the SafeNet Network HSM appliance and login as admin.</p>
        <p class="ol1" data-mc-autonum="7."><span class="autonumber"><span class="ol1Number">7.</span></span>Start the PED Client (the Remote PED enabling process on the appliance):<br /><span style="font-family: monospace;">lush:&gt; hsm ped connect -i 183.21.12.161 -port 1503</span><br style="font-family: monospace;" /><span style="font-family: monospace;">Luna PED operation required to connect to Remote PED - use orange PED key(s).</span><br style="font-family: monospace;" /><span style="font-family: monospace;">Ped Client Version 1.0.0 (10000) </span><br style="font-family: monospace;" /><span style="font-family: monospace;">   Ped Client launched in startup mode.    </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Starting background process </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Background process started</span><br style="font-family: monospace;" /><span style="font-family: monospace;">    Ped Client Process created, exiting this process. </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Command Result : 0 (Success) </span><br style="font-family: monospace;" /><span style="font-family: monospace;">  [luna27] lush:&gt;</span><br /><br /></p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>The serial number option on command <b>hsm ped connect</b> is needed if you are using Remote PED&#160;with an HSM other than the on-board SafeNet Network HSM (such as a connected SafeNet USB HSM for PKI). If a serial number is not specified, the internal HSM is assumed by default.<br /></p>
        <p class="ol1" data-mc-autonum="8."><span class="autonumber"><span class="ol1Number">8.</span></span>To verify that the Remote PED&#160;connection is functional, try some HSM commands that require PED action and PED Key authentication - the simplest is <b>hsm login</b>. First logout, because you were already logged in to the HSM...&#160;&#160;&#160;</p><pre class="listLevel1">[<span style="font-family: monospace;">luna27] lush:&gt;hsm logout </span><br style="font-family: monospace;" /><span style="font-family: monospace;">  'hsm logout' successful.    </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Command Result : 0 (Success)</span><br style="font-family: monospace;" /><span style="font-family: monospace;">[luna27] lush:&gt;hsm login </span><br style="font-family: monospace;" /><span style="font-family: monospace;">  Luna PED operation required to login as HSM Administrator - use Security Officer (blue) PED key. </span><br style="font-family: monospace;" /><span style="font-family: monospace;">   'hsm login' successful.    </span><br style="font-family: monospace;" /><span style="font-family: monospace;">Command Result : 0 (Success) </span><br style="font-family: monospace;" /><span style="font-family: monospace;">   [luna27] lush:&gt;</span><br /><br><br /></br></pre>
        <p class="ol1" data-mc-autonum="9."><span class="autonumber"><span class="ol1Number">9.</span></span>At this point, you have successfully set up a Remote PED link between a workstation computer (with PED attached to its USB port) and a distant SafeNet Network HSM/appliance. You have demonstrated that success by performing an HSM operation that demanded SO/HSM Admin PED Key authentication, without being physically near to the SafeNet Network HSM/appliance, and without having a SafeNet Network HSM PED directly attached to the SafeNet Network HSM/appliance. <br />You can now perform any HSM administration chores (including Cluster creation/administration) as though you were physically adjacent to the HSM, with equal confidence in the security of the system [HSM products that include Remote PED are now routinely submitted to approving agencies (like NIST/FIPS) for validation].<br /></p>
        <p class="ol1" data-mc-autonum="10."><span class="autonumber"><span class="ol1Number">10.</span></span>To disconnect: &#160;&#160;</p><pre class="listLevel1" xml:space="preserve">[luna27] lush:&gt;hsm ped disconnect
 <br style="font-family: monospace;" />WARNING !!  This command will disconnect remote PED.
If you are sure that you wish to proceed, then enter 'proceed', otherwise this command will abort.
<br style="font-family: monospace;" />&gt; proceed
Proceeding...
<br style="font-family: monospace;" />Ped Client Version 1.0.0 (10000)
<br style="font-family: monospace;" />Ped Client launched in shutdown mode.
<br style="font-family: monospace;" />Shutdown passed.

<br style="font-family: monospace;" />Command Result : 0 (Success)
<br style="font-family: monospace;" />[luna27] lush:&gt; &#160;&#160;</pre>
        <p xml:space="preserve">&#160;</p>
        <p class="note" xml:space="preserve" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>If a Remote PED session is in effect and you press the [&lt;] key on the PED (to go to the PED's "Select mode" menu), that action amounts to exiting the Remote PED mode. Therefore, the PED displays a message:  <br style="color: #f39108;" /><span style="font-family: monospace;">&#160;&#160;** WARNING **</span><br style="font-family: monospace;color: #f39108;" /><span style="font-family: monospace;">&#160;&#160;Exiting now will</span><br style="font-family: monospace;color: #f39108;" /><span style="font-family: monospace;">&#160;&#160;invalidate the RPK.</span><br style="font-family: monospace;color: #f39108;" /><span style="font-family: monospace;">&#160;&#160;Confirm ?&#160;&#160;&#160;&#160;&#160;YES/NO</span><br style="color: #f39108;" />If you press [YES], the RPK-validated Remote PED&#160;session is dropped and must be re-established from the HSM (with "<span style="font-family: monospace;">hsm ped connect &lt;network-target&gt;</span>" before you can resume activity with the Remote PED.<br style="color: #f39108;" />In other words, if you want to use that PED&#160;for any other purpose than the current connection with one remote HSM, you have to drop the current session to make such other use of the PED, and then have the appropriate RPK available when you are ready to re-establish the prior Remote PED connection.&#160;&#160;)</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span> The above note talks about a "session" that exists only between the Remote PED and the computer (actually the PedServer software running on that computer) to which the Remote PED&#160;is connected. That is separate from the session that was established between the distant appliance/HSM and the PedServer on your computer. The session between computer and HSM is time-sensitive - it is in existence while needed and is either dropped intentionally or times out after brief inactivity. The session between the Remote PED&#160;and its attached computer persists until you disconnect the PED or change modes, or until you stop the PedServer.exe process on the computer.&#160;<br /><br /><b>*****&#160;The default timeout for a Remote PED link between PedClient at the HSM and PedServer at the Remote PED, is 1800 seconds, or 30 minutes. If no Remote PED activity is requested for the entire timeout duration, the link ends, and must be re-established. While that link is down, and the HSM remains set to expect Remote PED operation, any requested PED operations simply fail. We recommend performing a disconnect before performing a connect, to ensure that the old link is cleanly severed and that a new link is cleanly established.&#160;*****</b> &#160;&#160;</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span> PED&#160;KEY MIGRATION from older classic-PED Datakeys (the PED&#160;Keys that look like toy plastic keys) is NOT&#160;SUPPORTED over <a name="kanchor147"></a>Remote PED, because the old classic PED 1.x has no way to connect to the PED Server. Migration of PED Keys from DataKeys to iKeys must be done locally. &#160;)</p>
        <p>If you encounter problems with Remote PED, <a href="remote_ped_troubleshooting.htm" class="MCXref xref">Troubleshooting Remote PED</a>.</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Network HSM</span> <span class="DefaultRelease">6.2.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-012</span> <span class="DefaultRevision">Rev. A</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">01 December 2016</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2016</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>