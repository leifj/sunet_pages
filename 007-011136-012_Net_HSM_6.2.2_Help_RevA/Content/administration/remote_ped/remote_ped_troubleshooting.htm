<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Administration Guide|Remote PED">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Troubleshooting Remote PED</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template_Enterprise.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span><span class="MCBreadcrumbsSelf">Administration Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="remote_ped.htm">Remote PED</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Troubleshooting Remote PED</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2>Troubleshooting Remote PED</h2>
        <p>This section describes how to recognize and fix some problems that you could encounter. </p>
        <h3>Ped connect can fail if IP is not accessible</h3>
        <p>On a system with two network connections, if pedserver attempts to use an IP address that is not accessible externally, then command <span class="code">lunacm:&gt;ped connect</span> can fail.</p>
        <p>Here is an example:</p>
        <p>This host computer is accessible through 192.20.10.175&#160;and has an additional IP address 192.168.72.1 (that is not accessible). 
&#160;
</p>
        <p class="code">Ethernet adapter VMware Network Adapter VMnet8:  <br />Connection-specific DNS Suffix . : <br />IP Address. . . . . . . . . . . . : 192.168.20.1 <br />Subnet Mask . . . . . . . . . . . : 255.255.255.0 <br />Default Gateway . . . . . . . . . :  <br /><br />Ethernet adapter Local Area Connection:  <br /><br />Connection-specific DNS Suffix . : <br />IP Address. . . . . . . . . . . . : 172.20.10.175  <br />Subnet Mask . . . . . . . . . . . : 255.255.255.0 <br />Default Gateway . . . . . . . . . : 172.20.10.10  <br /><br />Ethernet adapter Wireless Network Connection:  <br /><br />Media State . . . . . . . . . . . : Media disconnected  <br /><br />Ethernet adapter VMware Network Adapter VMnet1:  <br /><br />Connection-specific DNS Suffix . :<br /> IP Address. . . . . . . . . . . . : 192.168.72.1  <br />Subnet Mask . . . . . . . . . . . : 255.255.255.0 <br />Default Gateway . . . . . . . . . : 
&#160;
</p>
        <p>Command <span class="code">lunacm:&gt; pedserver -m show</span> returns 
&#160;
</p>
        <p class="code">Ped Server Version 1.0.5 (10005) <br />Ped Server launched in status mode.  <br /><br />Server Information: <br />Hostname: noi1-502192 <br />IP: 192.168.72.1 <br /> Firmware Version: 0.0.0-0 <br />PedII Protocol Version: 0.0.0-0 <br />Software Version: 1.0.5 (10005)  <br /><br />Ped2 Connection Status: Disconnected <br />Ped2 RPK Count 0 <br />Ped2 RPK Serial Numbers (none)  <br /><br />Client Information: Not Available  <br /><br />Operating Information: <br />Server Port: 1503 <br />External Server Interface: Yes <br />Admin Port: 1502 <br />External Admin Interface: No  <br /><br />Server Up Time: 5 (secs) <br />Server Idle Time: 5 (secs) (100%) <br />Idle Timeout Value: 1800 (secs)  <br /><br />Current Connection Time: 0 (secs) <br />Current Connection Idle Time: 0 (secs) <br />Current Connection Total Idle Time: 0 (secs) (100%)<br /> Total Connection Time: 0 (secs) <br />Total Connection Idle Time: 0 (secs) (100%) </p>
        <h5>To resolve this problem</h5>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Ensure that Pedserver is listening on the IP address that is accessible from outside. &#160;&#160;</p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>If that condition (step 1) is not the case then disable the network connection on which Pedserver is listening. &#160;&#160;</p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Restart Pedserver and confirm that Pedserver is listening on the IP address that is accessible from outside.</p>
        <h3>VPN</h3>
        <p>If pedserver is running on a laptop that might change location, it can happen that the active network address changes, even though the laptop is not shutdown. An example might be if you unplugged from working at home, over the corporate VPN, commuted to the office, and reconnected the laptop there. The IP address that your laptop is assigned when joining directly to the office network would be different from the address that had been assigned by the VPN server. </p>
        <p>In that situation, pedserver is still configured with the address you had while using the VPN.That pedserver session cannot work with the new address that is now assigned to your laptop. Running pedserver -mode stop does not completely clear all settings, so running pedserver -mode start again fails with a message like "Startup failed. : 0x0000303 RC_OPERATION_TIMED_OUT".<br /></p>
        <h5>To resolve this problem</h5>
        <p>To resolve this problem, </p>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Close the current Command Prompt window. </p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>Open a new Command Prompt. </p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Verify the current IP address with command <b>ipconfig</b> <![CDATA[ ]]></p>
        <p class="ol1" data-mc-autonum="4."><span class="autonumber"><span class="ol1Number">4.</span></span>Run <b>pedserver -mode start</b> <b>-ip</b> &lt;new-ip-address&gt; <b>-port</b> &lt;port-number&gt; and it should now succeed. </p>
        <h3>Timeout</h3>
        <p>The default timeout for a Remote PED link between PedClient at the HSM and PedServer at the Remote PED, is 1800 seconds, or 30 minutes. If no Remote PED activity is requested for the entire timeout duration, the link ends, and must be re-established. While that link is down, and the HSM remains set to expect Remote PED operation, any requested PED operations simply fail. We recommend performing a disconnect before performing a connect, to ensure that the old link is cleanly severed and that a new link is cleanly established.&#160; &#160;</p>
        <h3>Pedserver fails to start with "LOGGER_init failed" </h3>
        <p>The pedserver.exe process must be run using administrator privileges. If you forget and accidentally launch pedserver.exe in an ordinary, non-privileged-user command-prompt window, the pedserver fails to work, but the process is launched and continues in the background. If you then attempt to launch pedserver.exe from an Administrator command prompt, it fails with message "LOGGER_init failed". The logger is a necessary service for pedserver, and has failed to initialize for the new attempt because the earlier, non-functional instance of pedserver has locked the logger. </p>
        <h5>To resolve this problem</h5>
        <p>If pedserver fails with the message "LOGGER_init failed", proceed as follows:</p>
        <p class="ol1Start" data-mc-autonum="1."><span class="autonumber"><span class="ol1Number">1.</span></span>Check that the pedserver process is not already running. </p>
        <p class="ol1" data-mc-autonum="2."><span class="autonumber"><span class="ol1Number">2.</span></span>If it is, stop the process (to free the logger service). </p>
        <p class="ol1" data-mc-autonum="3."><span class="autonumber"><span class="ol1Number">3.</span></span>Start the pedserver process again, as Administrator.</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Network HSM</span> <span class="DefaultRelease">6.2.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-012</span> <span class="DefaultRevision">Rev. A</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">01 December 2016</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2016</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>