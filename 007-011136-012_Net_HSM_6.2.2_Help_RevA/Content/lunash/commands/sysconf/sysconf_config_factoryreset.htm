<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|sysconf|sysconf config">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>sysconf config factoryreset</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/Gemalto_Template_Enterprise.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><span class="MCBreadcrumbsSelf">LunaSH Command Reference Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../commands.htm">LunaSH Commands</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="sysconf.htm">sysconf</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">sysconf config factoryreset</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak"><a name="kanchor401"></a>sysconf config factoryreset</h2>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>Use this command from a locally-connected serial terminal, as this command removes network settings and you will need to re-establish IP before you can resume network connection. &#160;</p>
        <p>Reset the appliance to the settings created at the factory. This is the same action as running the <b>sysconf config restore</b> command on the 'factoryInit_local_host..." file. You can specify any individual service's configuration, or just reset all of them to the initial factory settings with the '-all' option. This reset is for the configurations of the indicated services and does not affect the HSM.</p>
        <p>This command affects appliance settings external to the HSM. To reset the HSM, use <b>hsm factoryReset</b> (which can be run from a local serial console only).</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>To reset the configuration for the NTLS service, you must first stop this service (<b>service stop ntls</b>).</p>
        <h3 class="ntoc">Syntax</h3>
        <p><b>sysconf config factoryReset -service</b> &lt;service&gt; [<b>-force</b>]</p>
        <table class="TableStyle-Page" style="caption-side: top;width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" cellspacing="0">
            <col class="TableStyle-Page-Column-Column1" style="width: 191px;" />
            <col class="TableStyle-Page-Column-Column1" style="width: 205px;" />
            <col class="TableStyle-Page-Column-Column1" style="width: 370px;" />
            <thead>
                <tr class="TableStyle-Page-Head-Header1">
                    <th class="TableStyle-Page-HeadE-Column1-Header1" style="text-align: left;">Parameter</th>
                    <th class="TableStyle-Page-HeadE-Column1-Header1" style="text-align: left;">Shortcut&#160;&#160;&#160;&#160;&#160;</th>
                    <th class="TableStyle-Page-HeadD-Column1-Header1" style="text-align: left;">Description &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyE-Column1-Body1" style="font-weight: bold;">-force &#160;&#160;&#160;</td>
                    <td class="TableStyle-Page-BodyE-Column1-Body1"><b>-fo</b>
                    </td>
                    <td class="TableStyle-Page-BodyD-Column1-Body1">Force the action without prompting.  </td>
                </tr>
                <tr class="TableStyle-Page-Body-Body1">
                    <td class="TableStyle-Page-BodyB-Column1-Body1" style="font-weight: bold;">-service&#160;</td>
                    <td class="TableStyle-Page-BodyB-Column1-Body1"><b>-s</b>
                    </td>
                    <td class="TableStyle-Page-BodyA-Column1-Body1">
                        <p>Specifies the service name.</p>
                        <p><b>Valid values:</b> network,ssh,NTLS,syslog,ntp,snmp,users,system,all</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="notepad_note">
            <br />
        </p>
        <h3 class="ntoc">Example</h3><pre xml:space="preserve">lunash:&gt; [local_host] lunash:&gt;sysconf config list



Configuration backup files in file system:

Size    |  File Name                                                |  Description
-----------------------------------------------------------------------------------------------------
8075    |  factoryInit_local_host_Config.tar.gz                     |  Initial Factory Settings

Command Result : 0 (Success)
[local_host] lunash:&gt;sysconf config factoryReset -service all


This command restores the initial factory configuration of service: all.
The HSM and Partition configurations are NOT included.


This command restores the previous configurations from the backup file: factoryInit_local_host_Config.tar.gz

WARNING !!  This command restores the configuration backup file: factoryInit_local_host_Config.tar.gz.
It first creates a backup of the current configuration before restoring: factoryInit_local_host_Config.tar.gz.
If you are sure that you wish to proceed, then type 'proceed', otherwise type 'quit'.

&gt; proceed
Proceeding...


Created configuration backup file: local_host_Config_20150925_1110.tar.gz



Restore the ntls configuration: Succeeded.

Restore the network configuration: Succeeded.

Restore the syslog configuration: Succeeded.

Force option used. Proceed prompt bypassed.
All key and certificates files were deleted.
You must restart NTP for the changes to take effect.
Check NTP status after restarting it to make sure that the client is able to start and sync with the server.

Restore the ntp configuration: Succeeded.

Restore the snmp configuration: Succeeded.

Restore the ssh configuration: Succeeded.

Restore the users configuration: Succeeded.

Restore the system configuration: Succeeded.

You must either reboot the appliance or restart the service(s) for the changes to take effect.
Please check the new configurations BEFORE rebooting or restarting the services.
You can restore the previous configurations if the new settings are not acceptable.



Command Result : 0 (Success)
</pre>
        <p>&#160;</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>Sometimes individual items can show in the output as having failed to reset, but the overall command succeeds. This is not an error. <br /><br />It occurs simply because some of the configuration items might already be at factory default settings and had never been configured. For example, not everybody configures NTP or SNMP. Therefore, no file of configuration settings for the particular service was ever created, and there was nothing for the <b>sysconf config factoryReset</b> command to do in those cases. This sometimes happens in integration laboratory environments.</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Network HSM</span> <span class="DefaultRelease">6.2.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-012</span> <span class="DefaultRevision">Rev. A</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">01 December 2016</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2016</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>