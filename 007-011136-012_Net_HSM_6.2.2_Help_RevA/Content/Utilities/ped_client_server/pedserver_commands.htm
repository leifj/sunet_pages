<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Utilities Reference Guide|Pedserver and Pedclient">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title> The pedserver Command</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template_Enterprise.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span><span class="MCBreadcrumbsSelf">Utilities Reference Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="ped_client_server.htm">Pedserver and Pedclient</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">The pedserver Command</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2> The pedserver Command</h2>
        <h3>Syntax</h3>
        <p>This is the syntax of the pedServer command, which includes starting and stopping of the service, and an assortment of configuration options. Specify "pedserver" at the command line, plus one of the modes, plus any option applicable to that mode. </p><pre xml:space="preserve">pedServer.exe 	–mode {start | stop | connect | disconnect | show | config }
              	-ip &lt;ip address&gt;
	 	[-port &lt;port number&gt;]
		[-force]

pedServer –appliance register 
             –name &lt;unique name&gt; 
             -certificate &lt;Network HSM certificate file&gt; 
             -ip &lt;network-hsm-ip&gt; 
             [-port &lt;port number&gt;]</pre>
        <p xml:space="preserve" class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>The -name parameter must be alphanumeric only: 0 through 9 or a through z or A through Z <br />No punctuation or special characters are permitted. </p><pre xml:space="preserve">

pedServer –appliance deregister 
             –name &lt;unique name&gt; 
             [-force]

pedServer –appliance list 

pedServer –regenCert [-force]

</pre>
        <p>&#160;</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>When registering, the default port 9697 is assumed. However in the special case where another application already uses port 9697, port forwarding in a router could remap a different incoming port number (that you provide in the <b>-appliance register</b> command) to 9697 when forwarded to the SafeNet Network HSM. </p><pre xml:space="preserve">C:\Program Files\SafeNet\LunaClient&gt;pedserver
Ped Server Version 1.0.5 (10005)

        Error: You must specify a mode.

Usage: pedServer [mode] [options...]

   Explanation of the modes:

     To query if a Ped Server is currently running, and to get details about
     the Ped Server, use this command:
        pedServer -mode show [ options... ]

     To shut down an existing Ped Server, use this command:
        pedServer -mode stop [ options... ]

     To start the Ped Server, use this command:
        pedServer -mode start [ options... ]

     To start the Ped Server, use this command:
        pedServer -mode start [ options... ]


     To show the existing configuration file settings, use this command:
        pedServer -mode config -show

     To restore the internal default configuration file settings, use this command:
        pedServer -mode config -create [ options... ]

     To modify the existing configuration file settings, use this command:
        pedServer -mode config -set [ options... ]

     To view a more detailed description of the Ped Server, use this command:
        pedServer -mode desc


   Explanation of the options:

   Any options that are not specified on the command line will be read from
   the config file.  If the config file cannot be found, internal default settings
   will be used.  Invalid options do not generate an error and are ignored.

     -mode &lt;mode&gt;               -&gt; Specifies the mode that the Ped Server will be
                                   executed in.  The supported modes are "start",
                                   "stop", "connect", "disconnect", "show" and "config".
     -configfile &lt;filename&gt;     -&gt; Specifies the config file to use.  Applicable to all
                                   modes.

     -name &lt;registered 
            appliance name&gt;     -&gt; Specifies the config file to use.  Applicable 
                                   to "connect" mode.
     -eserverport &lt;0 or 1&gt;      -&gt; Specifies if the server port is on "localhost"
                                   or listening on the external host name.  Applicable
                                   to "start" and "config set" modes.
     -port &lt;server port&gt;        -&gt; Specifies the server port number.  Applicable to
                                   "start" and "config set" modes.
     -eadmin &lt;0 or 1&gt;           -&gt; Specifies if the administration port is on
                                   "localhost" or listening on the external host
                                   name.  Applicable to "start" and "config set" modes.
     -admin &lt;admin port number&gt; -&gt; Specifies the administration port number.
                                   Applicable to "start", "stop", and "show" modes.
     -force                     -&gt; When used with "-start", specifies that any existing
                                   Ped Server currently running should be shutdown and a new
                                   Ped Server started.  Applicable to "start" mode.
     -set                       -&gt; When used with "-config", specifies that the
                                   configuration file should be updated with values
                                   of the other supplied options.  Applicable to "config"
     -show                      -&gt; When used with "-config", specifies that the
                                   contents of the configuration file should be displayed.
                                   Applicable to "config" mode.
     -idletimeout&lt;int&gt;          -&gt; Specifies the idle connection timeout in seconds.
                                   Applicable to "start" and "config set" modes.
     -socketreadtimeout &lt;int&gt;   -&gt; Specifies the socket read timeout in seconds.
                                   Applicable to "start", "stop", "show" and
                                   "config set" modes.
     -socketwritetimeout &lt;int&gt;  -&gt; Specifies the socket write timeout in seconds.
                                   Applicable to "start", "stop", "show" and
                                   "config set" modes.
     -internalshutdowntimeout &lt;int&gt; -&gt; Specifies the shutdown timeout in seconds for
                                   internal services.
                                   Applicable to "start", "stop" and "config set"
                                   modes.
     -bgprocessstartuptimeout &lt;int&gt; -&gt; Specifies the startup timeout for the detached
                                   process.
                                   Applicable to "start", "stop" and "config set"
                                   modes.
     -bgprocessshutdowntimeout &lt;int&gt; -&gt; Specifies the shutdown timeout for the detached
                                   process.
                                   Applicable to "start", "stop" and "config set"
                                   modes.
     -loginfo &lt;0 or 1&gt;          -&gt; Specifies if the logger should log "info" messages.
                                   Applicable to all modes.
     -logwarning &lt;0 or 1&gt;       -&gt; Specifies if the logger should log "warning" messages.
                                   Applicable to all modes.
     -logerror &lt;0 or 1&gt;         -&gt; Specifies if the logger should log "error" messages.
                                   Applicable to all modes.
     -logtrace &lt;0 or 1&gt;         -&gt; Specifies if the logger should log "trace" messages.
                                   Applicable to all modes.
     -logfilename &lt;filename&gt;    -&gt; Specifies the log file name.
                                   Applicable to all modes.
     -maxlogfilesize &lt;size&gt;     -&gt; Specifies the maximum log file size in KB
                                   Applicable to all modes.
     -pinginterval &lt;int&gt;        -&gt; Specifies the interval in seconds for ping commands.
                                   Applicable to "start" and "config set" modes.
     -pongtimeout &lt;int&gt;         -&gt; Specifies timeout in seconds for the ping response.
                                   Applicable to "start" and "config set" modes

C:\Program Files\SafeNet\LunaClient&gt;</pre><pre xml:space="preserve">&#160;</pre>
        <h3>Sample Outputs</h3>
        <p>Commands you are likely to use most often are PedServer mode start, to launch the service, when working in Client/Server mode, and PedServer mode show, to display its current status.</p><pre xml:space="preserve">C:\Program Files\Safenet\LunaClient&gt;PedServer.exe mode start
Ped Server Version 1.0.5 (10005)
Failed to load configuration file.  Using default settings.
Ped Server launched in startup mode.
Starting background process
Background process started
Ped Server Process created, exiting this process.
C:\Program Files\Safenet\LunaClient&gt;

C:\Program Files\Safenet\LunaClient&gt;PedServer.exe mode show
Ped Server Version 1.0.5 (10005)
Failed to load configuration file.  Using default settings.
Ped Server launched in status mode.
   Server Information:
      Hostname:                           OTT1-202311
      IP:                                 172.20.10.190
      Firmware Version:                   2.5.0-1
      PedII Protocol Version:             1.0.1-0
      Software Version:                   1.0.5 (10005)
      Ped2 Connection Status:             Connected
      Ped2 RPK Count                      1
      Ped2 RPK Serial Numbers             (5b420100834a2301)
   Client Information:                    Not Available
   Operating Information:
      Server Port:                        1503
      External Server Interface:          Yes
      Admin Port:                         1502
      External Admin Interface:           No
      Server Up Time:                     8 (secs)
      Server Idle Time:                   8 (secs) (100%)
      Idle Timeout Value:                 1800 (secs)
      Current Connection Time:            0 (secs)
      Current Connection Idle Time:       0 (secs)
      Current Connection Total Idle Time: 0 (secs) (100%)
      Total Connection Time:              0 (secs)
      Total Connection Idle Time:         0 (secs) (100%)
Show command passed.

C:\Program Files\Safenet\LunaClient&gt;
</pre><pre xml:space="preserve">&#160;</pre>
        <p>PedServer is required to run on any computer that has a SafeNet Remote PED attached, and is providing PED services. </p>
        <p>PedServer always works with an instance of PedClient. </p>
        <p>PedClient could be running on a distant HSM host computer, or it could be running on the same computer that has the Remote PED attached and PedServer running. This would normally be the case where a SafeNet Remote Backup HSM or other HSM is also attached or embedded. In other words, the one computer could be carrying on both halves of the PedClient/PedServer conversation over two ports in its own memory. </p>
        <p>PedServer can also run in peer-to-peer mode, where the server initiates the connection to the Client. This is needed when the Client (usually SafeNet Network HSM) is behind a firewall that forbids outgoing initiation of connections.</p>
        <p>See <a href="../../administration/backup/remote_app_partition.htm" class="MCXref xref">Remote Application-Partition Backup and Restore Using the Backup HSM</a><a href="../../administration/backup/remote_app_partition/prepare_rbs_for_backup-restore.htm" class="MCXref xref"> <![CDATA[ ]]></a>in the <i>Administration Guide</i> for more information.</p>
        <p>&#160;</p>
        <p class="footer"><span class="DefaultProduct">SafeNet Network HSM</span> <span class="DefaultRelease">6.2.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-012</span> <span class="DefaultRevision">Rev. A</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">01 December 2016</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2016</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>