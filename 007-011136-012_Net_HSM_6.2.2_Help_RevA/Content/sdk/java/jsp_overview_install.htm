<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="SDK Reference Guide|Java Interfaces">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>SafeNet JSP&#160;Overview and Installation</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Gemalto_Template_Enterprise.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><span class="MCBreadcrumbsSelf">SDK Reference Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="java.htm">Java Interfaces</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">SafeNet JSP&#160;Overview and Installation</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2><a name="kanchor540"></a>SafeNet JSP&#160;Overview and Installation</h2>
        <p><a name="kanchor541"></a>The SafeNet JSP is part of an application program interface (API) that 
 allows Java applications to make use of certain SafeNet products. </p>
        <p><a name="kanchor542"></a>As with other APIs, some existing Java-based applications might have generic 
 requirements and calls that can already work with SafeNet products. In other 
 cases, it might be necessary for you or your vendor to create an application 
 or to adapt one, using the JSP API. </p>
        <p>You have the choice of:</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>•</b></span></span>using a previously integrated 
 third-party application, known to work with this SafeNet product</p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>•</b></span></span>performing your own integration 
 with a Java-based application supplied by you or a third party, or </p>
        <p class="ul1" data-mc-autonum="&lt;b&gt;•&lt;/b&gt;"><span class="autonumber"><span class="ul1Bullet"><b>•</b></span></span>developing your own application 
 using our Java API.</p>
        <p>Develop your own Java apps using our included Software Development 
 Kit, which includes SafeNet Java API usage notes for developers, as well 
 as development support by SafeNet. A standard Java development environment 
 is required, in addition to the API provided by SafeNet.</p>
        <p>Please refer to the current-version SafeNet HSM&#160;Customer Release Notes (CRN) for the most up-to-date list of supported platforms and APIs.</p>
        <h3>JDK Compatibility</h3>
        <p>We formally test SafeNet HSMs and our Java provider with SUN JDK for all platforms except AIX, and with IBM JDK for the AIX platform. We have not had problems with OpenJDK, although it has not been part of our formal test suite. The SafeNet JCE provider is compliant with the JCE specification, and should work with any JVM that implements the Java language specification.</p>
        <p>Occasional problems have been encountered with respect to IBM JSSE.</p>
        <p>GNU JDK shipped with most Linux systems has historically been incomplete and not suitable.</p>
        <h3>Installation</h3>
        <p>To use the SafeNet JavaSP service providers four main components are needed.</p>
        <h4>Java SDK 1.6.0.xx or 1.7.0.xx or 1.8.0.xx</h4>
        <p>First, acquire and install 
 the Java SDK or RTE (available from the Java site, not included with the SafeNet software). Java must be installed before the SafeNet software, as some 
 of the Java files must be manipulated as described in the JSP portions 
 of the Getting Started section of this Help. &#160;Note 
 that the  JVM 1.6.x_xx or JVM 1.7.x or JVM 1.8.x is part of the Java SDK. &#160;</p>
        <h4>Java Cryptographic JCE Policy files (optional)</h4>
        <p>If you intend to generate 
 large key sizes, you will need two cryptographic JCE Policy files  v 1.6.x or v 1.7.x or 1.8.x
 (available from the Java web site). &#160;The 
 Getting Started section of this Help has instructions on what to do with 
 the two files (local_policy.jar and US_export_policy.jar).       </p>
        <p>If you see errors like "Invalid Key size", that is usually an indication that the JCE is not properly installed.</p>
        <h4>SafeNet Client CD</h4>
        <p>Follow the installation 
 procedure for the SafeNet Client as described in the <i>Installation Guide</i>.</p>
        <h4>SafeNet JavaSP</h4>
        <p>When installing the SafeNet Client software, also choose the option to install SafeNet JSP. Instructions 
 are provided in the platform-specific pages, including instructions for 
 installing SafeNet JSP for each operating system (files to copy/replace, 
 editing to perform, etc.) so that SafeNet Network HSM and SafeNet JSP can work with the 
 JRE.</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span><b>Java Provider (JSP)</b> - both GMC and GMAC are supported. "GmacAesDemo.java" provides a sample for using GMAC with Java. <br /><br />Java Parameter Specification class LunaGmacParameterSpec.java defines default values recommended by the NIST specification.</p>
        <h3>Post-Installation Tasks</h3>
        <h4>"Extractable" Option</h4>
        <p>The Luna provider provides an option to make newly secret keys extractable from the HSM, via the <span class="code">LunaSlotManager.setSecretKeysExtractable()</span> method.  </p>
        <p>Some situations exist in which keys should be extractable but this method cannot be used; for example, when the Luna provider is performing crypto operations for a <span class="MCExpanding MCExpanding_Open expanding"><a href="javascript:void(0);" class="MCExpandingHead MCExpandingHotSpot expandingHead MCExpandingHotSpot_">TLS server<img class="MCExpanding_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><span class="MCExpandingBody expandingBody"> [ because you cannot call this method from within your application and have it apply to the TLS server ]</span></span>.  We now provide a configuration option to enable this behavior.  To make secret keys extractable, add the following line to <span class="code">java.security</span>:</p>
        <p>com.safenetinc.luna.provider.createExtractableKeys=true</p>
        <p>This value will be read by the Luna provider on startup; to change the setting after the application has started, use the LunaSlotManager method.  Using that method overrides the setting in the file for that application, but does not overwrite it permanently.</p>
        <p>When Java, the SafeNet Client and SafeNet JSP are installed as directed, you 
 may then perform any integration required for your own, or third-party 
 Java application.</p>
        <h4>Using SafeNet JCE/JCA with 64-bit Libraries</h4>
        <p>If you are using SafeNet JCE/JCA with the 64-bit libraries for SafeNet Network HSM, 
 you must include the "-d64" switch in the Java command-line.</p>
        <p>For example: java -d64 -jar jMultitoken.jar</p>
        <p>For most 64-bit platforms, 64-bit is supported. Some 64-bit 
 platforms support the option of running in 32-bit mode), as a backward compatibility feature.</p>
        <p>If you use the 64-bit installation and do not use the "- d64" 
 command-line switch in your Java command lines, the system attempts (by 
 default) to use the 32-bit library (which is not installed, because you installed 64-bit in this example...), and the result 
 is an error message complaining about the kernel model.</p>
        <h4>Using ECC Keys for TLS&#160;with Java 7 </h4>
        <p>For optimal Java performance when using Elliptic Curve keys to perform TLS with Java 7, where those keys reside in the HSM,  you must configure the SunEC security provider (sun.security.ec.SunEC) to be <strong>below</strong> the LunaProvider in your java.security file.</p>
        <p>We suggest that you <strong>not</strong> attempt to resolve a performance issue by having the LunaProvider as the default because that would result in the symmetric keys also being used in the HSM which is not optimal for performance.</p>
        <h4>A Security Note for Java Developers</h4>
        <p>The SafeNet JSP is a Java API that is intended to be used as an interface between customer-written or third-party Java applications and the SafeNet HSM.  Managing security issues associated with the overall operational environment in which the application is running, including the user interface, is the responsibility of the application.  </p>
        <p>A common example would be input and capture of user name and password.  The application, or a set of organizational procedures, is responsible for making the access control decision regarding whether the user has the necessary permissions (at the organizational level) to access the HSM's services and then must provide protection for the password as it is entered, and erasure from memory after the operation is completed.  The SafeNet JSP will control access to the HSM based on the correct password being input from the application via the Login method, but security outside the HSM&#160;is your responsibility.  </p>
        <h4>Non-standard ECDSA</h4>
        <p>The SafeNet provider maps the "ECDSA" signature algorithm to "NONEwithECDSA". The Java convention is to map it to "SHA1withECDSA". This is noted here in case you wish to use it in provider inter-operability testing. This mapping is noted in the Javadoc as well.</p>
        <p>For comparison, "RSA" maps to "NONEwithRSA" while "DSA" maps to "SHA1withDSA". </p>
        <p class="footer"><span class="DefaultProduct">SafeNet Network HSM</span> <span class="DefaultRelease">6.2.2</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-012</span> <span class="DefaultRevision">Rev. A</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultDateLong">01 December 2016</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span> <span class="DefaultCopyright">Copyright 2001-2016</span>&#160;<span class="DefaultCompanyNameLong">Gemalto</span> <span style="color: #5e5e5c;"><![CDATA[  ]]></span>All rights reserved. </p>
    </body>
</html>