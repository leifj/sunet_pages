<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-conditions="Primary.notPCI,Primary.Default" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Configuration Guide|[Step 6] Set up a Network Trust Link|Windows NTL Setup">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Register the HSM Server Cert with the Client (Windows)</title>
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/SafeNet_Template.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#configuration/ntls_config/register_the_hsm_server_cert_with_the_client_windows.htm">Open topic with navigation</a>
        </p>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><span class="MCBreadcrumbsSelf">Configuration Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="prepare_the_client_for_network_trust_link.htm">[Step 6] Set up a Network Trust Link</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="ntls_prep_windows.htm">Windows NTL Setup</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Register the HSM Server Cert with the Client (Windows)</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h3><a name="kanchor51"></a>Register the HSM Server Certificate with the Client (Windows)</h3>
        <p><a name="kanchor52"></a><a name="kanchor53"></a>Use vtl, the supplied client-side tool for managing HSM client/server 
 setup. The vtl command is not interactive. It is called from the command 
 line or a shell prompt, it completes its current task, and it exits back 
 to the shell. </p>
        <p>Invoke the <span style="font-family: 'Courier New', monospace;">vtl 
 addServer</span> command so that the client can create a secure connection 
 with the HSM (the server).</p>
        <p>The vtl executable is located at <span style="font-family: 'Courier New';">c:\Program Files\SafeNet\LunaClient</span> unless you have changed the default installation. &#160;&#160;<br /></p>
        <h4>Register</h4>
        <p class="code">C:\Program Files\SafeNet\LunaClient &gt; vtl addServer -n &lt;LunaSA hostname-or-IPaddress&gt; 
 -c &lt;serverCert-file&gt;</p>
        <h5>Example</h5>
        <p class="code">&#160;&#160;&#160;c:\Program Files\SafeNet\LunaClient\ &gt; vtl addServer -n myLuna3 -c server.pem</p>
        <p>&#160;</p>
        <p>You might need to surround the entire filespec (path and filename) within quotation marks if Windows stumbles at the space between Program and Files.</p>
        <p>If the operations fail - and you have verified that the commands are typed correctly - then you might lack file permissions in the affected directories. If you lack administrator privileges on your computer, contact your IT department. If you do have the required privileges, then you might need to adjust the permissions for the affected directories (which by default are installed in the protected Windows directory "Program Files"). </p>
        <p>To adjust the permissions for the directory c:\Program Files\SafeNet\LunaClient\, right-click that directory. In the resulting context menu, select Properties, and in the ensuing dialog select the "Security" tab. Choose the appropriate user or group and adjust as needed. Then repeat the commands in the steps above, which should now work as expected.</p>
        <p>
            <img src="../../Resources/Images/give_yourself_directory_permissions.png" alt="Give yourself the needed permissions on the certificate directories so you can complete the certificate exhange and registration with the Luna appliance." title="This is just an example to allow you to copy a file into the directory and register. Yours will differ. If you have a problem, contact your company's Help Desk." />
        </p>
        <p>&#160;</p>
        <p>The appearance might vary slightly for different Windows versions. If the permissions change does not propagate to sub-directories, then you might need to repeat the process for the "cert" sub-directory and for the "client" and "server" sub-directories.</p>
        <p>&#160;</p>
        <p>If you are working without DNS, then give the server IP number, rather 
 than its name, as in:</p>
        <p class="code">c:\Program Files\SafeNet\LunaClient\ &gt;vtl addServer -n &lt;sa-ip-address&gt; -c server.pem</p>
        <p>When you have completed this step, see <a href="create_a_client_certificate_windows.htm" class="MCXref xref "><span style="color: #6c286b;" class="mcFormatColor">"Create a Client Certificate (Windows)"</span></a>. &#160;&#160;&#160;</p>
        <p class="footer"><span class="DefaultProduct">Luna SA</span> <span class="DefaultRelease">5.4.1</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-007</span> <span class="DefaultRevision">Rev C</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span> <span class="DefaultDateShort">July 2014</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span> <span class="DefaultCopyright">Copyright 2014</span>&#160;<span class="DefaultCompanyNameLong">SafeNet, Inc.</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span>All rights reserved. </p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom"><a href="../../../index.html#configuration/ntls_config/register_the_hsm_server_cert_with_the_client_windows.htm">Open topic with navigation</a>
        </p>
    </body>
</html>