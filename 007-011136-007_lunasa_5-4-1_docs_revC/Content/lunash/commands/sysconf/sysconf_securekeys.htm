<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-conditions="Primary.Default" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|sysconf">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>sysconf securekeys</title>
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/SafeNet_Template.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/sysconf/sysconf_securekeys.htm">Open topic with navigation</a>
        </p>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><span class="MCBreadcrumbsSelf">LunaSH Command Reference Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../commands.htm">LunaSH Commands</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="sysconf.htm">sysconf</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">sysconf securekeys</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">sysconf securekeys</h2>
        <p> Move RSA&#160;keys to hardware. <a name="kanchor449"></a><a name="kanchor450"></a>This command migrates the Luna keys used to secure the NTLS link from the Luna appliance's file system into the HSM. </p>
        <p>If you use <b>sysconf regenCert</b>, the generated private key, public key and certificate reside, by default, in the Luna appliance's file system.   </p>
        <p>This command (<b>sysconf secureKeys</b>) moves your existing RSA keys into the HSM.</p>
        <p>You must be logged in to use this command. </p>
        <p>Once the keys reside in the HSM, any operation that needs the private key will require HSM access. For this reason, whenever the system is rebooted (maintenance, power outage, etc.) you must run <b>ntls activateKeys</b> to activate (authenticate to) the partition containing those keys. </p>
        <p>If your application sets up an NTLS link and then runs multiple crypto operations over that link, you are unlikely to notice an operational difference. If your application sets up and tears down the link for each crypto operation, then the slight additional overhead might become apparent.</p>
        <h3 class="ntoc">Syntax</h3>
        <p class="code"><b>sysconf securekeys</b> [<b>-force</b>]</p>
        <table style="caption-side: top;width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" class="TableStyle-Page" cellspacing="0">
            <col class="Column-Column1" style="width: 123px;" />
            <col class="Column-Column1" style="width: 137px;" />
            <col class="Column-Column1" style="width: 550px;" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1" style="text-align: left;">Parameter&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</th>
                    <th class="HeadE-Column1-Header1" style="text-align: left;">Shortcut</th>
                    <th class="HeadD-Column1-Header1" style="text-align: left;">Description &#160;&#160;</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="BodyB-Column1-Body1" style="font-weight: bold;">-f</td>
                    <td class="BodyA-Column1-Body1">Force the action without prompting.</td>
                </tr>
            </tbody>
        </table>
        <h3 class="ntoc">Example</h3><pre xml:space="preserve">lunash:&gt; sysconf secureKeys
</pre><pre xml:space="preserve">WARNING !!  This command migrates the SSL RSA keys to the internal hardware module.<br />If you are sure that you wish to proceed, then type 'proceed', otherwise type 'quit'
</pre><pre xml:space="preserve">&gt; proceed
<br />Proceeding...

</pre><pre xml:space="preserve">Enter User Password: <br /></pre><pre xml:space="preserve">Proceeding to migrate keys to "Cryptoki User" with handle 13 </pre><pre xml:space="preserve">Successfully migrated NTLS keys from software to hardware. </pre><pre xml:space="preserve">Command Result : 0 (Success) <br />[myLuna] lunash:&gt;ntls activateKeys</pre><pre xml:space="preserve">Enter User Password: <br />Stopping ntls:OK <br />Starting ntls:OK: 
  </pre><pre xml:space="preserve">Command Result : 0 (Success)
</pre>
        <p class="footer"><span class="DefaultProduct">Luna SA</span> <span class="DefaultRelease">5.4.1</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-007</span> <span class="DefaultRevision">Rev C</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span> <span class="DefaultDateShort">July 2014</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span> <span class="DefaultCopyright">Copyright 2014</span>&#160;<span class="DefaultCompanyNameLong">SafeNet, Inc.</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span>All rights reserved. </p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom"><a href="../../../../index.html#lunash/commands/sysconf/sysconf_securekeys.htm">Open topic with navigation</a>
        </p>
    </body>
</html>