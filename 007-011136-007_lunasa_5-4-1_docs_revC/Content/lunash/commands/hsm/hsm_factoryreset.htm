<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-conditions="Primary.notPCI,Primary.notPCM,Primary.Default" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|hsm">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>hsm factoryreset</title>
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/SafeNet_Template.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/hsm/hsm_factoryreset.htm">Open topic with navigation</a>
        </p>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><span class="MCBreadcrumbsSelf">LunaSH Command Reference Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../commands.htm">LunaSH Commands</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="hsm.htm">hsm</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">hsm factoryreset</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">hsm factoryreset</h2>
        <p>Set the HSM back to its factory default settings, clearing all 
 contents. This command  affects only the HSM, and not the settings for other components of the appliance. The command <b>sysconf config factoryreset</b> affects appliance settings external to the HSM To bring your entire Luna SA as close as possible to original configuration, as shipped from the factory, run both commands.</p>
        <p class="caution" data-mc-autonum="&lt;b&gt;CAUTION:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>CAUTION:</b> &#160;</span></span>This command puts the HSM in a zeroized state. </p>
        <p class="notepad_note">This command can be run only via a local serial connection; it is not accepted via SSH. Because this is a destructive command, the user is asked 
 to “proceed” unless the -force switch is provided at the command line.&#160;See <a href="../../../administration/decommission/destroy_scenarios.htm" class="MCXref xref "><span style="color: #6c286b;" class="mcFormatColor">"Comparison of Destruction/Denial Actions"</span></a>&#160;in the <i>Adminstration Guide</i> to view a table that compares and contrasts various "deny access" events or actions that are sometimes confused.</p>
        <p> It does not require HSM login. The assumption is that your organization's physical security protocols prevent unauthorized physical access to the HSM. If those protocols failed, an unauthorized person would have no access to HSM contents, and would be limited to  temporary denial of service by destruction of HSM contents. An intruder could do more damage with a hammer.</p>
        <p class="note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; &#160;"><span class="autonumber"><span><b>Note:</b> &#160;</span></span>This  command does not erase the RPV (Remote PED Vector or orange PED Key authentication data) from the HSM. That data is required for Remote PED operations to function, including remote HSM&#160;initialization, if needed. <br /><br />You can deliver an HSM appliance in the un-initialized state (to customers or to remotely located entities of your own organization), and then remotely initialize and configure the HSM at its intended location. To do so, you should first run the <b>hsm ped vector init</b> command to generate an RPV&#160;on the HSM and imprint it onto an orange PED Key, before shipping. Once that is established, you can ship the HSM with no other data or authentication on it (no SO, no cloning Domain, no user Partitions) and resume remote management and Remote PED operations after it arrives and is connected at its destination.<br /><br />Maintaining the RPV outside of the envelope on the HSM that is cleared by <b>hsm factoryReset</b> is not considered a security risk, since the holder of the RPK has no special access to the HSM, unless they also possess a valid blue or black PED Key - which they could not, once the HSM has undergone factoryReset. </p>
        <h3 class="ntoc">Syntax</h3>
        <p class="code">hsm factoryreset [<b>-force</b>]</p>
        <table style="caption-side: top;width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" class="TableStyle-Page" cellspacing="0">
            <col class="Column-Column1" style="width: 126px;" />
            <col class="Column-Column1" style="width: 149px;" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th style="text-align: left;font-size: 12pt;" class="HeadE-Column1-Header1">
                        <p> Parameter</p>
                    </th>
                    <th style="text-align: left;font-size: 12pt;" class="HeadE-Column1-Header1">
                        <p>Shortcut  </p>
                    </th>
                    <th style="text-align: left;font-size: 12pt;" class="HeadD-Column1-Header1">
                        <p>Description </p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="BodyB-Column1-Body1" style="font-weight: bold;">-f</td>
                    <td class="BodyA-Column1-Body1">
                        <p>Force the action without prompting.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 class="ntoc">Example</h3>
        <p style="font-weight: bold;">Non-local (network connection) attempt:</p><pre xml:space="preserve">lunash:&gt;hsm factoryReset</pre><pre xml:space="preserve">Error: &#160;'hsm 
 factoryReset' can only be run from the local console. 
 Login as 'admin' using the serial port on the 
 Luna SA before running this command.</pre><pre xml:space="preserve">Command Result : 0 (Success)<br />lunash:&gt;</pre><pre xml:space="preserve">&#160;</pre>
        <p style="font-weight: bold;">Local attempt:</p><pre xml:space="preserve">lunash:&gt;hsm factoryReset</pre><pre xml:space="preserve">CAUTION: &#160;Are you sure you wish to reset this HSM to factory default 
 settings? All partitions and data will be erased and 
 HSM policies will be reverted to factory settings. Type 
 'proceed' to return the HSM to factory default, or 'quit' 
 to quit now.</pre><pre xml:space="preserve">&#160;&gt; proceed</pre><pre xml:space="preserve">'hsm factoryReset' successful.</pre><pre xml:space="preserve">Please wait while the HSM is reset to complete the process.</pre><pre xml:space="preserve">The remote PED vector (RPV) has been erased on HSM.</pre><pre xml:space="preserve">Command Result : 0 (success)<br /></pre>
        <p class="code"><a name="aanchor64"></a>
            <MadCap:concept term="Declassify" />
        </p>
        <p class="footer"><span class="DefaultProduct">Luna SA</span> <span class="DefaultRelease">5.4.1</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-007</span> <span class="DefaultRevision">Rev C</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span> <span class="DefaultDateShort">July 2014</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span> <span class="DefaultCopyright">Copyright 2014</span>&#160;<span class="DefaultCompanyNameLong">SafeNet, Inc.</span> <span style="color: #5e5e5c;"> <![CDATA[ ]]></span>All rights reserved. </p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom"><a href="../../../../index.html#lunash/commands/hsm/hsm_factoryreset.htm">Open topic with navigation</a>
        </p>
    </body>
</html>