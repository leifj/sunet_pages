<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="LunaSH Command Reference Guide|LunaSH Commands|partition">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>partition restore</title>
        <link href="../../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/SafeNet_Template.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../index.html#lunash/commands/partition/partition_restore.htm">Open topic with navigation</a>
        </p>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span><span class="MCBreadcrumbsSelf">LunaSH Command Reference Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../commands.htm">LunaSH Commands</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="partition.htm">partition</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">partition restore</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2 class="pageBreak">partition restore</h2>
        <p> Restores the contents of an HSM partition from a backup token. This command securely moves contents from a backup token to an HSM partition on the HSM. The Luna SA administrator executing this command has the option of replacing the objects existing on the HSM partition or adding to them. Note that if objects are added to the HSM partition it is possible that the same object may exist twice on the HSM partition with two different object handles.</p>
        <p>Because replacing data in a partition is destructive, if this option is selected the user is prompted to proceed/quit.</p>
        <p>If the passwords are not provided via the command line, the user is prompted for them interactively. User input is echoed as asterisks.</p>
        <h3 class="ntoc">Syntax</h3>
        <p><b>partition restore</b> [<b>-partition name -password</b> &lt;password&gt;] [<b>-tokenpw</b> &lt;password&gt;] [<b>-add</b>] [<b>-replace</b> [<b>-force</b>]]</p>
        <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/Page.css');" class="TableStyle-Page" cellspacing="0">
            <col class="Column-Column1" style="width: 142px;">
            </col>
            <col class="Column-Column1" style="width: 142px;">
            </col>
            <col class="Column-Column1">
            </col>
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadE-Column1-Header1">Shortcut</th>
                    <th class="HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-add</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-a</td>
                    <td class="BodyD-Column1-Body1">
                        <p>Use this switch (no argument) to specify that the data objects on the backup token shall be added to those already existing on the specified HSM Partition. Note that even objects on the backup token that are identical to objects in the HSM Partition will be added to the HSM Partition when specifying this switch; thus it is possible that the HSM Partition may have two identical objects on it as a result of this command.</p>
                        <p>You must specify either <b>-add</b> or <b>-replace</b>.</p>
                    </td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-force</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-f</td>
                    <td class="BodyD-Column1-Body1">Force the action without prompting.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-partition</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-par</td>
                    <td class="BodyD-Column1-Body1">Specifies the name of the HSM partition from which all data/key objects are to be restored. Obtain the HSM partition name by using the <b>partition -list</b> command. </td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-password</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-pas</td>
                    <td class="BodyD-Column1-Body1">
                        <p>Specifies the HSM Partition Owner's (or Crypto Officer's)  text password. </p>
                        <p>This parameter is mandatoryfor password-authenticated HSMs. It is ignored on PED-authenticated HSMs.</p>
                    </td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-replace</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-r</td>
                    <td class="BodyD-Column1-Body1">
                        <p>Use this switch (no argument) to erase any data/key objects existing on the specified HSM Partition before loading the keys from the backup token.</p>
                        <p>You must specify either <b>-add</b> or <b>-replace</b>.</p>
                    </td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-serial</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-s</td>
                    <td class="BodyD-Column1-Body1">Specifies the token serial number.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-tokenpar</td>
                    <td class="BodyE-Column1-Body1" style="font-weight: bold;">-tokenpa</td>
                    <td class="BodyD-Column1-Body1">Specifies the token partition name.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1" style="font-weight: bold;">-tokenpw</td>
                    <td class="BodyB-Column1-Body1" style="font-weight: bold;">-tokenpw</td>
                    <td class="BodyA-Column1-Body1">
                        <p> The password for the user on the backup token. If this is a Secure Authentication &amp; Access Control token, then Luna PED is required and any value provided here is ignored. If you do not enter this parameter you will be prompted for it.</p>
                        <p>This parameter is mandatoryfor password-authenticated HSMs. It is ignored on PED-authenticated HSMs.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 class="ntoc">Example</h3>
        <p>The following example is for a PED-authenticated HSM</p><pre xml:space="preserve">lunash:&gt; partition restore -partition j1 -password userpin -replace</pre><pre xml:space="preserve">CAUTION:  Are you sure you wish to erase all objects in the</pre><pre xml:space="preserve">partition named:</pre><pre xml:space="preserve">j1</pre><pre xml:space="preserve">Type 'proceed' to continue, or 'quit' to quit now.</pre><pre xml:space="preserve">&gt; proceed</pre><pre xml:space="preserve">Luna PED operation required to login to partition backup space - use black PED Key.</pre><pre xml:space="preserve">Luna PED operation required to login to partition - use black PED Key.</pre><pre xml:space="preserve">Key handle 8 cloned from source to target.</pre><pre xml:space="preserve">Key handle 9 cloned from source to target.</pre><pre xml:space="preserve">'partition restore' successful.</pre>
        <p class="footer"><span class="DefaultProduct">Luna SA</span> <span class="DefaultRelease">5.4.1</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-007</span> <span class="DefaultRevision">Rev C</span> <span style="color: #5e5e5c;"> </span> <span class="DefaultDateShort">July 2014</span> <span style="color: #5e5e5c;"> </span> <span class="DefaultCopyright">Copyright 2014</span>&#160;<span class="DefaultCompanyNameLong">SafeNet, Inc.</span> <span style="color: #5e5e5c;"> </span>All rights reserved. </p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom"><a href="../../../../index.html#lunash/commands/partition/partition_restore.htm">Open topic with navigation</a>
        </p>
    </body>
</html>