<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-conditions="Primary.Default" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="HSM Administration Guide|Remote PED">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>&#160;About Remote PED</title>
        <link href="../../Resources/TableStyles/Page.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Breadcrumbs.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/SafeNet_Template.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#administration/remote_ped/about_remote_ped.htm">Open topic with navigation</a>
        </p>
        <table style="width: 100%;border-spacing: 0px 0px;mc-table-style: url('../../Resources/TableStyles/Breadcrumbs.css');border-left-style: none;border-left-width: 1px;border-left-color: #000000;border-right-style: none;border-right-width: 1px;border-right-color: #000000;border-top-style: none;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e6e6e6;" class="TableStyle-Breadcrumbs" cellspacing="0">
            <col style="width: 41px;" class="TableStyle-Breadcrumbs-Column-Column1" />
            <col class="TableStyle-Breadcrumbs-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Breadcrumbs-Body-Body1">
                    <th class="TableStyle-Breadcrumbs-BodyB-Column1-Body1">
                        <p class="home" style="font-weight: normal;"><a href="../../Home_sa.htm">Home</a> &gt;
                        </p>
                    </th>
                    <th class="TableStyle-Breadcrumbs-BodyA-Column1-Body1">
                        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span><span class="MCBreadcrumbsSelf">HSM Administration Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="remote_ped.htm">Remote PED</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">About Remote PED</span>
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
        <h2>&#160;About Remote PED</h2>
        <p>The Remote PED concept (Luna PED with Remote Capability) was introduced to satisfy a need to administer HSMs that are housed away from their owners/administrators, at physically remote sites or inside heavily-secured premises, where obtaining local physical access to the HSM is difficult or time-consuming.</p>
        <p>Remote PED provides administrative convenience similar to remotely accessing a Password-authenticated HSM, but with the added security and role separation of PED authentication. The remote system is asked to perform an HSM function 
 (this is the Administration aspect); it demands the relevant PED Key (the 
 Authentication). With local Luna PED this would mean that someone standing beside 
 the remote appliance would need to connect a Luna PED, insert the requested 
 PED Key and press [ENTER]. </p>
        <p>Remote PED provides a means to perform sensitive operations on HSMs that have access secured by Trusted Path (PED) Authentication, without being physically present to insert PED&#160;Keys and press PED buttons on a Luna&#160;PED connected directly to the HSM.</p>
        <p>The feature requires: </p>
        <p> - a Remote PED Server on a workstation that connects over a secure network link to </p>
        <p> - a Remote PED Client in the computer or appliance that contains the HSM, and </p>
        <p> - a SafeNet Luna  PED 2.5.0-2 or greater, <b>with</b> the Remote PED feature installed, (which has the capability to operate in Local PED&#160;or Remote PED mode, as needed); not every PED 2.5.0 includes the Remote PED feature - that PED capability must be ordered specifically and factory installed, and </p>
        <p> - an orange RemotePED PED Key, which provides the authentication for the Remote PED connection between the workstation computer (with Luna PED 2 connected and PEDServer running) and the remotely located Luna HSM appliance with the RemotePED client running.<br /></p>
        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Page.css');" class="TableStyle-Page" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1" style="text-align: left;">Term &#160;&#160;</th>
                    <th class="HeadD-Column1-Header1" style="text-align: left;">Meaning &#160;&#160;</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">Remote PED &#160;&#160;</td>
                    <td class="BodyD-Column1-Body1">A Luna PED, with Remote capability, connected, powered on, and set to Remote mode. &#160;&#160;</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">RPV &#160;&#160;</td>
                    <td class="BodyD-Column1-Body1">Remote PED Vector - a randomly generated, encrypted value used to authenticate between a Remote PED (via PedServer) and a distant Luna HSM (PED Client). &#160;&#160;</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">RPK &#160;&#160;</td>
                    <td class="BodyD-Column1-Body1">Remote PED Key - an orange PED Key, the repository of an RPV value, for use in the Remote PED process.&#160;&#160;</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">PedServer &#160;&#160;</td>
                    <td class="BodyD-Column1-Body1">The PED server program that resides on a workstation and mediates between a locally-connected Remote PED and a distant PEDClient (running at a distant Luna HSM). &#160;&#160;</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">PEDClient</td>
                    <td class="BodyA-Column1-Body1">The PED Client program - embedded in the case of a Luna appliance, or installed on a computer with a contained Luna K-card HSM or with a USB-connected Luna&#160;G5 (or Backup) HSM - anchors the HSM end of the Remote PED service and initiates the contact with a PedServer instance, on behalf of its HSM.</td>
                </tr>
            </tbody>
        </table>
        <h3>Why do I want it?</h3>
        <p>You want to locate your operational appliances at remote locations or 
 multiple locations around the city, country, world, and be able to administer 
 them fully, from one location, without need for site visits and without 
 carrying of PED&#160;Keys through unsecured areas.</p>
        <h3>How does it work?</h3>
        <p>The HSM must initially be configured with a local PED, in order to set its authentication and create a relationship between the HSM and an orange PED Key (RPV, or Remote PED&#160;Vector). That RPV, carried via the orange PED Key, is the means by which a PED at a remote (PedServer) location can be recognized and trusted over a distance, by an HSM that shares the same RPV. <br></br><br></br>During the imprinting process, the HSM can take on the RPV of an existing orange PED Key (RPK, or Remote PED Key), or the HSM can generate a new RPV and imprint it on an orange PED Key. </p>
        <p>The diagram shows the preliminary imprinting step, where the HSM and (at least one) orange PED Key are made to share an RPV. Again, this must take place via a locally connected PED. The administrator could be co-located with the HSM, or could be elsewhere issuing the commands, but either the administrator or an assistant must be present at the HSM to present the orange PED Key for the RPV imprinting. Once that is completed, further PED operations can be untethered from direct local PED connection and moved anywhere along with that RPV-bearing orange PED Key.</p>
        <p>
            <img src="../../Resources/Images/luna-sa-5_prep_for_remote-ped_633x381.png" alt="Illustration of equipment and relationships in preparing for Remote PED operation" title="Setting up to use Remote PED" style="width: 633;height: 381;">
            </img>
        </p>
        <p>The HSM is then shipped and installed at its remote location.</p>
        <p>At your administrative location, a workstation is configured with special (PedServer) software, and a Luna PED 2 Remote (remote-capable PED) is connected via USB to that workstation. </p>
        <p>Using SSH, you open an administrative session (connect and log in as "admin") on the remote HSM. You tell the HSM&#160;to expect a remote PED, rather than local PED. You issue commands as needed. </p>
        <p>When an HSM command requires authentication to the HSM, the HSM looks for a remote PED server with the same Remote PED&#160;Vector. If it can authenticate properly with that remote PED server, the HSM accepts authentication data via that connection. </p>
        <h3>One-to-One Remote PED Connections</h3>
        <p>A SafeNet Luna HSM can establish a Remote PED connection with any workstation that <br /> - is running PEDserver.exe, <br /> - has a suitable Remote PED connected, and <br /> - has the correct PED Keys (including the orange key) for that HSM. </p>
        <p>However, the Luna HSM can make only a single connection for Remote PED operation at one time. The current session must timeout or be deliberately stopped before another workstation can be called into a Remote PED connection with that Luna HSM.'</p>
        <p>Similarly, a given workstation can enter into a Remote PED connection with any Luna HSM with PEDClient, or any Luna HSM, that initiates such a connection (provided the proper PED, PED Keys, software, etc. are all in place), but it can make only one such connection at a time. This contrasts with SSH connections, where that same workstation could have multiple SSH windows open to multiple admin sessions on a single or multiple Luna HSMs.</p>
        <p>There is no requirement for the workstation providing the Remote PED connection to be the same one providing the SSH session to the appliance admin shell (lush), nor is there any requirement that they be different workstations.</p>
        <h3>Priority and Lockout</h3>
        <p>A Remote PED connection is always initiated from the Luna HSM - a workstation cannot invoke a Remote PED session as a Remote PED function. That is, you could be sitting at Workstation "A", with a command-line window open, in which you can run the PedServer.exe, and there is no provision to use that program to connect to the Remote PED client on a Luna HSM-attached computer, or a Luna SA appliance. Nevertheless, you could open an SSH window on that same workstation "A" (or on any other computer), connect to the Luna SA appliance or the Luna&#160;HSM host computer, log in, and tell the host to initiate a Remote PED connection (<span class="code">hsm ped connect</span>) with workstation "A". The appliance or HSM host computer does not care which computer runs the SSH (or local serial) connection to its admin interface - the two functions (a communication connection (for Luna shell [lush] on Luna SA, or for a computer hosting a Luna PCI-E or Luna G5 HSM) and a communication connection for Remote PED operation) are completely separate. </p>
        <p>When a Remote PED connection is in force, the local PED interface to the HSM is disabled. If a local PED operation is in progress, it is not possible to start a Remote PED connection until the current local-PED-mediated HSM&#160;operation completes. But it must be an active operation sequence - merely having a local PED&#160;connected to the HSM does not lock out the initiation of a Remote PED connection. For example, if you had either an SSH or serial terminal session logged in to the Luna shell (lush) in which you started an HSM command that began using a connected local PED and PED Key for authentication, AND you started a second SSH session in which you issued the "hsm ped connect" command, one of two things would happen:</p>
        <p>- the "hsm ped connect" command would begin executing, would pause while the local-PED operation (started in the other lush session) was in progress, then would resume when the local-PED operation terminated, or</p>
        <p>- the "hsm ped connect" command would begin executing, would pause while the local-PED operation was in progress, and would eventually time-out if the local-PED operation did not terminate sufficiently quickly.</p>
        <p>If a Remote PED connection is currently in force, then the local PED is ignored, and all PED requests are routed to the Remote PED. </p>
        <p>If a Remote PED connection is currently in force, then subsequent attempts to start a different connection are refused until the current connection times out or is deliberately stopped. </p>
        <h3>Remote PED&#160;Timeout</h3>
        <p>In local PED mode, one Luna PED is connected directly to the HSM. Timeouts are governed by the configuration of the appliance or host computer and the HSM and are not generally modifiable.</p>
        <p>In Remote PED&#160;mode, the PED Server on each remote Workstation has a timeout setting (which can be modified), and the HSM has a Remote PED timeout setting that can be shown (lunash command "hsm ped timeout show" on Luna SA) and modified (lunash command "hsm ped timeout set" on Luna SA). If nothing has been set, then the default value for the Remote PED&#160;connection timeout (1800 seconds) is in effect. </p>
        <p>The Remote PED server instances on workstations, and the Remote PED&#160;client inside the Luna SA appliance or on an HSM host computer, are not aware of each other's timeout values. For a given Remote PED connection, the shorter timeout value rules. Thus, if a Remote PED server on one of your workstation computers were to timeout during a Remote PED sequence, it would log the event and send a message to the appliance or HSM host that the connection had been open too long. The Remote PED Client on the Luna SA appliance or HSM host computer, receiving that message, would gracefully close the link and the host-side timeout would not be reached.</p>
        <h3>Ports</h3>
        <p>We suggest port 1503 for the Remote PED connection, but you can use any port that does not conflict with another operation.</p>
        <h3>Windows 7</h3>
        <p>PedServer.exe (on the computer to which your Remote PED is attached) is run from the command line.<br />To use PedServer on a Windows 7 computer, right-click the Command Prompt icon, and from the resulting menu select "Run as Administrator".</p>
        <p>
            <img src="../../Resources/Images/run_win7_console_as_admin.png" />
        </p>
        <p>If you lack system permissions to operate as Administrator on the computer that is to host the PED Server, contact your IT department to address the situation.</p>
        <p>If you open a command-prompt window as an ordinary user in Windows 7, and run PedServer.exe, the program detects that it lacks access and permissions, and returns an error like the following:</p><pre xml:space="preserve">C:\Program Files\SafeNet\LunaClient&gt;pedserver mode start
Ped Server Version 1.0.5 (10005)

Failed to load configuration file.  Using default settings.

Ped Server launched in startup mode.
Starting background process
InternalRead: 10 seconds timeout
Failed to recv query response command: RC_OPERATION_TIMED_OUT c0000303
Background process startup timed out after 10 seconds.
Startup failed. : 0xc0000303 RC_OPERATION_TIMED_OUT

C:\Program Files\SafeNet\LunaClient&gt;</pre>
        <p>&#160;</p>
        <p>If you encounter the error above, use Windows Task Manager to select the PedServer process, right-click, and select "End process", before cleanly retrying PedServer.exe via an Administrator Command Prompt. </p>
        <p>Other Windows versions have not exhibited this requirement.</p>
        <h3>Limitations</h3>
        <p>The connection is one-on-one. While a Remote PED connection is active between one HSM and one remote PED workstation (running PedServer.exe), neither entity is able to make a similar connection with a different partner. The connection must time out, or be deliberately stopped before the HSM can connect with another PedServer workstation and enter a new remote PED authentication arrangement.</p>
        <p>When an RPV is created, it is a randomly-generated value that exists nowhere else. You control which (and how many) HSMs will contain that RPV, and which (and how many) orange RPK PED Keys will contain copies of it. A Remote PED with an inserted RPK (orange Remote PED&#160;Key) can be used only with distant Luna HSMs that share that exact RPV. If you launch a Remote PedServer with a connected Remote PED and provide any other orange PED&#160;Key, it is not accepted by any distant Luna HSM that does not have the matching RPV. In this manner, you can segregate the ability of personnel to remotely control specific HSMs, by controlling which orange PED&#160;Keys they are issued. Two people in the same office could have access and control of entirely different sets of remotely located HSMs, with no overlap, as long as you trusted them not to exchange orange PED&#160;Keys. You can further control who has what access by invoking MofN when you first create an RPV.</p>
        <p>Next, see <a href="remote-ped_using.htm" class="MCXref xref "><span style="color: #6c286b;" class="mcFormatColor">"Using the Remote PED Feature"</span></a>, and <a href="remote_ped_architecture.htm" class="MCXref xref "><span style="color: #6c286b;" class="mcFormatColor">"Remote PED Architecture"</span></a>.</p>
        <h3>Compatibility</h3>
        <p>Remote PED for Luna HSM 5.2 is not compatible with earlier HSM versions.</p>
        <h3>Security of Remote PED</h3>
        <p>All communication between the Remote PED and the HSM in its host is transmitted within an AES-256 encrypted channel using session keys base on secrets (the Remote PED Vector, or RPV on the orange Remote PED Key or RPK) that are shared out-of-band via the Remote PED role. This is considered a very secure query/response mechanism.</p>
        <p>&#160;</p>
        <p class="footer"><span class="DefaultProduct">Luna SA</span> <span class="DefaultRelease">5.4.1</span> <span class="DefaultProjectTitle">Product Documentation</span> <br /><span class="DefaultPartNumber">007-011136-007</span> <span class="DefaultRevision">Rev C</span> <span style="color: #5e5e5c;"> </span> <span class="DefaultDateShort">July 2014</span> <span style="color: #5e5e5c;"> </span> <span class="DefaultCopyright">Copyright 2014</span>&#160;<span class="DefaultCompanyNameLong">SafeNet, Inc.</span> <span style="color: #5e5e5c;"> </span>All rights reserved. </p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom"><a href="../../../index.html#administration/remote_ped/about_remote_ped.htm">Open topic with navigation</a>
        </p>
    </body>
</html>